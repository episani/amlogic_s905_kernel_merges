/*
 * ISP driver
 *
 * Author: Kele Bai <kele.bai@amlogic.com>
 *
 * Copyright (C) 2010 Amlogic Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */
#include <mach/am_regs.h>
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/err.h>
#include <linux/amlogic/tvin/tvin_v4l2.h>
#include "isp_regs.h"
#include "isp_hw.h"

#define DEVICE_NAME "isp"

static unsigned int gamma_enable = 1;
module_param(gamma_enable,uint,0664);
MODULE_PARM_DESC(gamma_enable,"\n enable/disable for gamma.\n");

static unsigned int af_filter0 = 7;
module_param(af_filter0,uint,0664);
MODULE_PARM_DESC(af_filter0,"\n filter for af hist.\n");

static unsigned int af_filter1 = 2;
module_param(af_filter1,uint,0664);
MODULE_PARM_DESC(af_filter1,"\n filter for af hist.\n");

static unsigned int af_limit = 0;
module_param(af_limit,uint,0664);
MODULE_PARM_DESC(af_filter0,"\n filter for af hist.\n");

/*
*reg 0x00~0x07
*reg 0xaf
*/
#if 0
static int isp_param_lns_lut_480p[1024] = {
	0x8a809c8a,0x857c9785,0x80769080,0x7a71897a,0x756d8575,0x71688171,0x6c657b6c,0x69617769,0x665f7366,0x635c6f63,0x615a6c61,0x5f586a5f,0x5e57685e,0x5d56675d,0x5c55655c,0x5b55665b,0x5c56655c,0x5c55665c,0x5c56665c,0x5d57675d,0x5f58695f,0x60596c60,0x625b6f62,0x645d7264,0x68607668,0x6b637b6b,0x70678070,0x746b8474,0x796f8a79,0x7d74907d,0x83799783,0x887e9c88,
	0x887e9a88,0x837a9483,0x7d748e7d,0x786f8778,0x736b8273,0x6e677d6e,0x6a62776a,0x675f7367,0x645d6f64,0x615a6c61,0x5f59695f,0x5d57675d,0x5b56655b,0x5a55645a,0x59546359,0x59536359,0x59546259,0x59546359,0x5a55635a,0x5b55645b,0x5c56665c,0x5e58695e,0x60596c60,0x635c6e63,0x655e7365,0x69617769,0x6d657c6d,0x71698171,0x766d8676,0x7b728c7b,0x81779381,0x867c9986,
	0x847b9684,0x80789180,0x7a728a7a,0x756d8475,0x70677e70,0x6b63786b,0x67607367,0x635d6f63,0x615a6b61,0x5e58685e,0x5c56655c,0x5a55635a,0x58536158,0x58526058,0x57525e57,0x56525e56,0x56525e56,0x56525e56,0x57525f57,0x58536158,0x59546359,0x5b55655b,0x5d57685d,0x60596b60,0x625b6f62,0x655e7365,0x6a62786a,0x6e667e6e,0x736b8273,0x786f8978,0x7e758f7e,0x82789582,
	0x82789282,0x7d748e7d,0x776f8677,0x726a8072,0x6d657b6d,0x68617568,0x645d6f64,0x615a6c61,0x5e58685e,0x5b56655b,0x59546259,0x58536058,0x56515e56,0x55515c55,0x54505b54,0x544f5b54,0x544f5a54,0x54505b54,0x54505c54,0x55515d55,0x57525f57,0x58536258,0x5a55655a,0x5d57685d,0x60596b60,0x635c6f63,0x665f7566,0x6b647a6b,0x70687f70,0x766d8676,0x7b728c7b,0x7f76927f,
	0x7e768f7e,0x7a728a7a,0x746c8374,0x6f677d6f,0x6a62776a,0x655e7165,0x615b6c61,0x5e58685e,0x5b56655b,0x59546259,0x57525e57,0x55515c55,0x534f5a53,0x524e5852,0x514e5751,0x514d5751,0x514d5751,0x514d5751,0x524e5952,0x534f5953,0x54505c54,0x56515e56,0x58536158,0x5a55645a,0x5d57685d,0x60596c60,0x645d7064,0x68617668,0x6d657c6d,0x736a8273,0x786f8978,0x7c748e7c,
	0x7c738c7c,0x786f8778,0x726a8072,0x6c657a6c,0x67607467,0x635c6e63,0x5f596a5f,0x5b56655b,0x59546259,0x56525f56,0x54505c54,0x524f5952,0x514d5751,0x504c5550,0x4f4c544f,0x4e4b534e,0x4e4b544e,0x4f4b544f,0x4f4c554f,0x504d5650,0x524e5952,0x54505b54,0x56515e56,0x58536158,0x5b55655b,0x5e58695e,0x625b6e62,0x665f7366,0x6b63796b,0x70687f70,0x766d8776,0x7a718b7a,
	0x7a718a7a,0x756d8575,0x6f687e6f,0x6a62776a,0x655e7165,0x605a6c60,0x5d57675d,0x5a55635a,0x57535f57,0x54505b54,0x524f5852,0x504d5650,0x4f4b534f,0x4d4b524d,0x4c4a514c,0x4c49504c,0x4c49504c,0x4c49514c,0x4d4a514d,0x4e4b534e,0x4f4c554f,0x514e5851,0x54505b54,0x56515e56,0x59546259,0x5c56665c,0x5f596b5f,0x645d7064,0x68617668,0x6e667d6e,0x746b8374,0x786e8878,
	0x786f8778,0x736b8273,0x6d657b6d,0x67617467,0x635c6e63,0x5f59695f,0x5b56645b,0x58536058,0x55515c55,0x524f5952,0x504d5650,0x4e4b534e,0x4d4a514d,0x4b494f4b,0x4a484d4a,0x4a474d4a,0x4a474d4a,0x4a484e4a,0x4a494f4a,0x4c49504c,0x4d4b534d,0x4f4c554f,0x524e5852,0x54505c54,0x57526057,0x5a54645a,0x5d58685d,0x625b6d62,0x675f7467,0x6b647a6b,0x71698171,0x756d8675,
	0x766d8576,0x71698071,0x6b64796b,0x655f7265,0x615b6c61,0x5d57675d,0x59546259,0x56515e56,0x534f5a53,0x514d5651,0x4e4b534e,0x4c49504c,0x4a484e4a,0x49474c49,0x48464a48,0x47464a47,0x47464b47,0x48464b48,0x48474c48,0x4a484e4a,0x4b49504b,0x4d4a534d,0x504c5650,0x524e5952,0x55515e55,0x58536258,0x5c56665c,0x605a6c60,0x655d7265,0x6a62776a,0x6f677e6f,0x736b8473,
	0x746c8374,0x6f687e6f,0x69627669,0x645d7064,0x5f596a5f,0x5b56645b,0x57536057,0x54505b54,0x524e5852,0x4f4c544f,0x4c4a504c,0x4a484e4a,0x48464b48,0x47454947,0x46444846,0x45444745,0x45444745,0x46444846,0x46454946,0x48464b48,0x49474d49,0x4c49504c,0x4e4b544e,0x514d5751,0x53505c53,0x57525f57,0x5a55645a,0x5e586a5e,0x635c6f63,0x68607468,0x6e657c6e,0x726a8172,
	0x726a8172,0x6e667c6e,0x68617568,0x625c6e62,0x5e58685e,0x5a54635a,0x56525e56,0x534f5953,0x504d5650,0x4d4b524d,0x4b494f4b,0x48474b48,0x47454947,0x46444746,0x45434645,0x44434644,0x44434544,0x44434644,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4c49524c,0x4f4c554f,0x524f5952,0x56515d56,0x59546359,0x5d57685d,0x615b6d61,0x675f7367,0x6c647b6c,0x70687f70,
	0x71698171,0x6c657a6c,0x67607367,0x615b6c61,0x5d57675d,0x59546159,0x55515c55,0x524e5852,0x4f4c544f,0x4c4a504c,0x49484d49,0x47464a47,0x45444845,0x44434544,0x43424443,0x43424443,0x43424443,0x43424443,0x44434644,0x45444745,0x47454a47,0x49474c49,0x4b484f4b,0x4e4b534e,0x514d5851,0x54505c54,0x58536158,0x5c56665c,0x615a6c61,0x655e7265,0x6b63796b,0x6f667e6f,
	0x70687f70,0x6b64796b,0x665f7266,0x605a6c60,0x5c56655c,0x57536057,0x54505b54,0x504d5650,0x4e4b524e,0x4b494f4b,0x48474b48,0x46454846,0x44444644,0x43434443,0x42414342,0x42414242,0x42414342,0x42424342,0x43424443,0x44434644,0x46454846,0x47464b47,0x4a484e4a,0x4d4b524d,0x504d5650,0x534f5b53,0x57526057,0x5b56655b,0x60596b60,0x655d7165,0x6a62786a,0x6e657e6e,
	0x6f687e6f,0x6b63786b,0x655e7165,0x60596a60,0x5b56655b,0x57525f57,0x534f5a53,0x504d5550,0x4d4a514d,0x4a484e4a,0x47464a47,0x45444745,0x44434544,0x42424342,0x41414241,0x41414141,0x42414242,0x42414242,0x42424342,0x43434543,0x45444745,0x47454a47,0x49474d49,0x4c49514c,0x4f4c554f,0x534f5a53,0x56525f56,0x5b55645b,0x5f596a5f,0x645d7064,0x69627769,0x6e657c6e,
	0x6f677d6f,0x6a63776a,0x645e7064,0x5f59695f,0x5a55645a,0x56525e56,0x524f5952,0x4f4c544f,0x4c4a504c,0x49484d49,0x47454947,0x45444645,0x43424443,0x42414242,0x41414141,0x40414140,0x41414141,0x41414141,0x42424242,0x43424443,0x44434644,0x46454946,0x49474c49,0x4b49504b,0x4f4c544f,0x524e5952,0x56515e56,0x5a55635a,0x5f58695f,0x635c6f63,0x68617668,0x6d647b6d,
	0x6e677d6e,0x6a63776a,0x645d6f64,0x5f59695f,0x5a55645a,0x56515e56,0x524f5952,0x4f4c544f,0x4b4a4f4b,0x49474c49,0x46454946,0x44444644,0x43424343,0x41414241,0x41414141,0x40404040,0x40404140,0x41404141,0x42414242,0x43424343,0x44434644,0x46454846,0x48464c48,0x4b49504b,0x4e4b544e,0x524e5952,0x55515e55,0x5a54635a,0x5e58695e,0x635c6f63,0x68607568,0x6c647b6c,
	0x6e677d6e,0x6a63776a,0x645d6f64,0x5f59695f,0x5a55635a,0x56525e56,0x524e5852,0x4e4c544e,0x4b4a4f4b,0x49474b49,0x46454846,0x44444644,0x43424343,0x41414241,0x41404141,0x40404040,0x40404040,0x41414141,0x41414141,0x42424342,0x44434544,0x46444846,0x48464c48,0x4b484f4b,0x4e4b544e,0x524e5952,0x55515e55,0x59546359,0x5e58685e,0x635c6e63,0x68607568,0x6c647b6c,
	0x6e667c6e,0x6a62776a,0x645d7064,0x5e59695e,0x5a55635a,0x56525e56,0x524f5952,0x4e4c544e,0x4b4a504b,0x48474b48,0x46454846,0x44444644,0x43424343,0x41414241,0x41404141,0x40404040,0x40404140,0x40404140,0x41414241,0x42424442,0x44434644,0x46444846,0x48464b48,0x4b49504b,0x4e4b544e,0x524e5952,0x55515e55,0x59546359,0x5e58695e,0x635c6f63,0x68607668,0x6c647b6c,
	0x6e677d6e,0x6a63786a,0x645e7064,0x5f59695f,0x5a55645a,0x56525e56,0x524f5952,0x4f4c544f,0x4b4a504b,0x49484c49,0x46454946,0x44444644,0x43424443,0x42414242,0x41404141,0x40404140,0x40404140,0x41414141,0x42414242,0x43424443,0x44434644,0x46444846,0x49474c49,0x4b49504b,0x4e4b544e,0x524e5952,0x55515e55,0x5a54645a,0x5e57695e,0x635c7063,0x68607668,0x6d647c6d,
	0x6f677e6f,0x6b64786b,0x645f7164,0x5f5a6a5f,0x5b56655b,0x57525f57,0x534f5a53,0x4f4d554f,0x4c4a514c,0x4a484d4a,0x47464947,0x45444745,0x43434543,0x42424342,0x41414241,0x41414141,0x41404141,0x41414241,0x42424342,0x43424443,0x45434745,0x46454946,0x49474d49,0x4c49514c,0x4f4c564f,0x534e5a53,0x56525f56,0x5a55655a,0x5e58695e,0x635c7063,0x69617769,0x6d657c6d,
	0x70697f70,0x6b64796b,0x665f7266,0x605a6c60,0x5b56655b,0x57536057,0x53505b53,0x504d5650,0x4d4b524d,0x4a494e4a,0x48464b48,0x46454846,0x44444644,0x43434443,0x42424342,0x41414241,0x42414242,0x42414342,0x43424443,0x44434644,0x45444845,0x47464a47,0x4a484e4a,0x4d4a524d,0x504c5650,0x534f5b53,0x57526057,0x5b55655b,0x5f596b5f,0x645d7164,0x6a61786a,0x6e657c6e,
	0x71698071,0x6d657a6d,0x66607366,0x615c6c61,0x5c57665c,0x58546158,0x54515c54,0x514e5751,0x4e4b534e,0x4b49504b,0x49474c49,0x46454946,0x45444745,0x44434544,0x43424443,0x43424343,0x42424342,0x43424443,0x44434544,0x45444745,0x46454946,0x48474c48,0x4b494f4b,0x4e4b534e,0x514d5751,0x544f5c54,0x58526158,0x5b56665b,0x60596c60,0x655d7265,0x6a62796a,0x6f667f6f,
	0x726b8272,0x6d667c6d,0x68617468,0x625c6d62,0x5e58685e,0x59556359,0x56525e56,0x524f5952,0x4f4c554f,0x4c4a514c,0x4a484e4a,0x48464b48,0x46454946,0x45444745,0x44434644,0x44434544,0x44434544,0x44434644,0x45444645,0x46454846,0x47464b47,0x49484e49,0x4c49514c,0x4f4b554f,0x524e5952,0x55505e55,0x58536258,0x5d56675d,0x615a6d61,0x665e7366,0x6b647a6b,0x70678070,
	0x746c8374,0x6f687d6f,0x69627669,0x645e7064,0x5f5a6a5f,0x5a56645a,0x57536057,0x53505b53,0x504e5750,0x4e4c534e,0x4b494f4b,0x49484d49,0x47464b47,0x46454946,0x45444845,0x45444745,0x45444745,0x45444845,0x46454946,0x47464a47,0x49474d49,0x4b49504b,0x4d4b534d,0x504d5650,0x534f5b53,0x56516056,0x5a54645a,0x5e57695e,0x625b6f62,0x67607567,0x6d657c6d,0x72698172,
	0x766e8576,0x716a8071,0x6b64796b,0x665f7266,0x615b6c61,0x5c57675c,0x58546258,0x55515d55,0x524e5952,0x4f4d554f,0x4d4b524d,0x4b494f4b,0x49484d49,0x48474b48,0x47454a47,0x47454a47,0x46454a46,0x47464a47,0x48464b48,0x49484d49,0x4b484f4b,0x4d4a524d,0x4f4c554f,0x514e5951,0x54505d54,0x57526157,0x5b55665b,0x5f596b5f,0x645c7164,0x69617869,0x6f667f6f,0x736a8373,
	0x77708877,0x736c8273,0x6d667b6d,0x67617467,0x625c6e62,0x5e59695e,0x5a55645a,0x56525f56,0x54505b54,0x514e5851,0x4f4c554f,0x4c4b524c,0x4b494f4b,0x4a484e4a,0x49474d49,0x49474c49,0x48474c48,0x49474d49,0x4a484e4a,0x4b494f4b,0x4d4a524d,0x4f4c554f,0x514d5851,0x534f5b53,0x56515f56,0x59546359,0x5d57685d,0x615a6d61,0x665e7366,0x6b637a6b,0x71688171,0x756c8575,
	0x79718979,0x766e8576,0x6f687e6f,0x69637669,0x655e7165,0x5f5a6b5f,0x5c57665c,0x59546259,0x56525e56,0x534f5a53,0x514e5751,0x4e4c544e,0x4d4b524d,0x4c4a514c,0x4b494f4b,0x4b494f4b,0x4b494f4b,0x4b49504b,0x4c49514c,0x4d4b534d,0x4f4c554f,0x504d5750,0x524e5a52,0x55505e55,0x58536258,0x5b55665b,0x5f586b5f,0x635c7063,0x68607668,0x6d657c6d,0x736a8373,0x776e8877,
	0x7c738c7c,0x78708878,0x716b8071,0x6b65796b,0x67607467,0x625c6e62,0x5e59695e,0x5b56655b,0x58536158,0x55515d55,0x534f5a53,0x514e5851,0x4f4c564f,0x4e4b544e,0x4d4b524d,0x4d4a524d,0x4d4a524d,0x4d4b534d,0x4e4b544e,0x4f4c554f,0x514d5751,0x524f5a52,0x55505d55,0x57526157,0x5a54645a,0x5d57695d,0x615a6d61,0x655e7365,0x6a62796a,0x6f677f6f,0x756c8575,0x79708a79,
	0x7f768f7f,0x7a738a7a,0x746d8374,0x6e687d6e,0x69637769,0x655e7165,0x615b6c61,0x5d58685d,0x5a55645a,0x57536057,0x55515d55,0x53505b53,0x524e5852,0x504d5750,0x504d5650,0x4f4c554f,0x4f4c554f,0x504d5650,0x504d5750,0x524e5852,0x534f5a53,0x55505d55,0x56526056,0x59546359,0x5c56675c,0x60596b60,0x635c7063,0x68607668,0x6c657b6c,0x726a8272,0x786f8878,0x7c738d7c,
	0x81799381,0x7d768d7d,0x77708677,0x716a8071,0x6c667a6c,0x67617467,0x635d6f63,0x605a6b60,0x5d58675d,0x5a55645a,0x58536058,0x56515e56,0x54505c54,0x534f5a53,0x524f5952,0x524e5952,0x524e5952,0x524e5a52,0x534f5b53,0x54505c54,0x56515e56,0x57526157,0x59546359,0x5c56665c,0x5f586a5f,0x625b6e62,0x665f7366,0x6b627a6b,0x6f677f6f,0x756c8675,0x7a718c7a,0x7e75907e,
	0x847c9784,0x80789080,0x7a738a7a,0x746d8374,0x6f687e6f,0x6b64786b,0x66607366,0x625d6f62,0x605a6b60,0x5d57665d,0x5a55645a,0x58546258,0x57526057,0x56515e56,0x55505d55,0x55505d55,0x55505d55,0x55515d55,0x56515e56,0x57526057,0x58536158,0x5a54635a,0x5c56675c,0x5e586a5e,0x625b6e62,0x655d7265,0x69617769,0x6e667d6e,0x726a8372,0x776f8877,0x7d738f7d,0x81779381,
	0x877e9987,0x827a9382,0x7d758d7d,0x776f8777,0x726a8272,0x6d667b6d,0x69627769,0x655e7265,0x625c6e62,0x5f596a5f,0x5c57665c,0x5a55655a,0x59546259,0x58536158,0x57526057,0x57526057,0x57525f57,0x57526057,0x58536158,0x59536359,0x5a54655a,0x5c56665c,0x5e58695e,0x605a6c60,0x635d7163,0x675f7567,0x6c637b6c,0x70687f70,0x756c8575,0x7a718b7a,0x7f76917f,0x837a9683
};

static int isp_param_lns_lut_720p[1024] = {
	0x7f748f7f,0x7b718b7b,0x756c8475,0x70667e70,0x6b62796b,0x665e7266,0x625a6d62,0x5f58695f,0x5c55655c,0x59536259,0x57525f57,0x55505c55,0x534f5a53,0x524e5852,0x514d5751,0x514d5751,0x514d5751,0x514d5851,0x524d5952,0x534e5a53,0x544f5c54,0x56515f56,0x58526258,0x5b55655b,0x5e57695e,0x615a6d61,0x655d7265,0x69617769,0x6f647d6f,0x746a8374,0x796f8979,0x7e728e7e,
	0x7e738e7e,0x796f8979,0x746a8374,0x6e657c6e,0x69617669,0x645d7164,0x61596c61,0x5d56685d,0x5b55645b,0x58526058,0x56515d56,0x544f5b54,0x524e5852,0x514d5751,0x504c5550,0x504c5550,0x4f4b554f,0x504c5650,0x504c5750,0x514d5851,0x534e5a53,0x55505d55,0x57516057,0x5a53635a,0x5d55675d,0x60586b60,0x645b7064,0x685f7568,0x6d637b6d,0x72688172,0x786e8878,0x7c718c7c,
	0x7c718c7c,0x786e8778,0x72688072,0x6c637a6c,0x675f7367,0x635b6e63,0x5f58695f,0x5c55665c,0x59536259,0x56515e56,0x544f5a54,0x524d5852,0x504c5650,0x4f4b544f,0x4e4b534e,0x4e4a524e,0x4e4a524e,0x4e4a534e,0x4f4b544f,0x504c5550,0x514d5851,0x534e5b53,0x55505d55,0x58526158,0x5b54655b,0x5e57695e,0x625a6e62,0x665e7366,0x6b62796b,0x70677f70,0x766b8676,0x7a6f8b7a,
	0x7b708a7b,0x766c8576,0x70677e70,0x6a62786a,0x655d7265,0x61596c61,0x5d56675d,0x5a54635a,0x57525f57,0x55505c55,0x524e5852,0x504c5650,0x4e4b534e,0x4d4a514d,0x4c49514c,0x4c49504c,0x4c49504c,0x4c49504c,0x4d4a514d,0x4e4b534e,0x504b5550,0x524d5852,0x544f5b54,0x57515f57,0x59536359,0x5c56675c,0x60596c60,0x655c7165,0x69607769,0x6f657d6f,0x746a8474,0x796e8879,
	0x796f8979,0x746a8374,0x6f657c6f,0x69607669,0x645c7064,0x60596a60,0x5c55665c,0x58536158,0x56515d56,0x534e5953,0x504d5650,0x4f4b534f,0x4d4a514d,0x4b494f4b,0x4a484e4a,0x4a484d4a,0x4a474d4a,0x4a484e4a,0x4b484f4b,0x4c49514c,0x4e4b534e,0x504c5650,0x524e5952,0x55505d55,0x58526158,0x5b54655b,0x5f576a5f,0x635b6f63,0x675f7567,0x6d647b6d,0x73688273,0x776c8677,
	0x786d8678,0x736a8173,0x6d647a6d,0x675f7467,0x635b6e63,0x5e58685e,0x5a54645a,0x57525f57,0x54505b54,0x524d5852,0x4f4c544f,0x4d4a514d,0x4b484f4b,0x4a474d4a,0x49474c49,0x48464b48,0x48464b48,0x49464c49,0x49474d49,0x4b484e4b,0x4c49514c,0x4e4b544e,0x514d5751,0x534f5b53,0x56515f56,0x59546459,0x5d57685d,0x625a6e62,0x665e7366,0x6c62796c,0x71678071,0x766b8576,
	0x766c8576,0x72687f72,0x6b63796b,0x665e7266,0x615a6c61,0x5d56675d,0x59536259,0x56505d56,0x534f5953,0x504c5550,0x4e4a524e,0x4b494f4b,0x49474d49,0x48464b48,0x47454a47,0x47454947,0x46454946,0x47454a47,0x48464b48,0x49474d49,0x4b484f4b,0x4d4a524d,0x504c5550,0x524e5952,0x55505d55,0x58526258,0x5c56675c,0x60596c60,0x655d7165,0x6a61776a,0x70667e70,0x746a8374,
	0x756b8375,0x70677e70,0x6a62776a,0x655d7065,0x60596a60,0x5c56655c,0x58526058,0x55505b55,0x524e5852,0x4f4b544f,0x4c4a514c,0x4a484e4a,0x48464b48,0x47454947,0x46454846,0x45444745,0x45444745,0x46444846,0x46454946,0x48464b48,0x4a474d4a,0x4c49504c,0x4e4b534e,0x514d5751,0x544f5b54,0x58526058,0x5b55655b,0x5f586a5f,0x645c7064,0x69607669,0x6e657c6e,0x73698273,
	0x746a8374,0x6f667d6f,0x69617569,0x645c6f64,0x5f58695f,0x5b55645b,0x57525f57,0x534f5a53,0x514d5651,0x4e4b524e,0x4b494f4b,0x49474c49,0x47454a47,0x45444745,0x45434645,0x44434544,0x44434644,0x45434645,0x46444846,0x47454947,0x49474c49,0x4b484f4b,0x4d4a524d,0x504c5650,0x534f5a53,0x57515f57,0x5a54645a,0x5e57695e,0x635b6f63,0x685f7468,0x6d647b6d,0x72688072,
	0x73698173,0x6e657c6e,0x68607568,0x635b6e63,0x5e58685e,0x5a54635a,0x56515e56,0x534e5953,0x4f4c554f,0x4d4a514d,0x4a484e4a,0x48464a48,0x46454846,0x45434645,0x44434544,0x43424443,0x43424443,0x44434544,0x45434645,0x46444846,0x48464a48,0x49474d49,0x4c49514c,0x4f4b554f,0x524e5952,0x56505e56,0x59546359,0x5d57685d,0x625a6d62,0x675f7467,0x6d637a6d,0x71678071,
	0x72688072,0x6d647b6d,0x675f7367,0x625b6d62,0x5d57685d,0x59536259,0x55505d55,0x514e5851,0x4e4b544e,0x4c49504c,0x49474c49,0x47454947,0x45444745,0x44434544,0x43424443,0x42424342,0x43424443,0x43424443,0x44434544,0x45444745,0x47454a47,0x49474c49,0x4b49504b,0x4e4b534e,0x514d5851,0x55505d55,0x59536159,0x5d56675d,0x61596d61,0x665d7366,0x6c62796c,0x70667f70,
	0x71677f71,0x6c647a6c,0x675f7367,0x615a6c61,0x5d56665d,0x58536158,0x544f5c54,0x514d5751,0x4e4b524e,0x4b494f4b,0x48464b48,0x46454846,0x44434644,0x43424443,0x42414342,0x42414242,0x42414342,0x42424342,0x43424443,0x44434644,0x46444846,0x48464b48,0x4a484f4a,0x4d4a524d,0x514c5751,0x544f5c54,0x58526158,0x5c55665c,0x61596c61,0x655d7265,0x6b61796b,0x6f657e6f,
	0x70677e70,0x6c63796c,0x665e7266,0x605a6c60,0x5c56665c,0x58526058,0x544f5b54,0x504d5650,0x4d4a524d,0x4a484e4a,0x48464a48,0x45444745,0x44434544,0x42424342,0x41414241,0x41414241,0x41414241,0x42414242,0x42424342,0x44434544,0x45444745,0x47454a47,0x4a474e4a,0x4d49514d,0x504c5650,0x544f5b54,0x57526057,0x5b55655b,0x60586b60,0x655c7165,0x6a61776a,0x6f657e6f,
	0x70677f70,0x6b63796b,0x655e7265,0x60596b60,0x5b55655b,0x57526057,0x534f5a53,0x504c5550,0x4c4a514c,0x49484d49,0x47454a47,0x45444645,0x43424443,0x42414242,0x41414141,0x41414141,0x41414141,0x41414141,0x42424342,0x43424443,0x45444645,0x47454a47,0x49474d49,0x4c49514c,0x4f4c564f,0x534e5a53,0x57515f57,0x5b55655b,0x5f586a5f,0x645c7064,0x6a60786a,0x6e647d6e,
	0x6f667e6f,0x6b62786b,0x655d7165,0x5f596b5f,0x5b55655b,0x57525f57,0x534f5a53,0x4f4c544f,0x4c4a504c,0x49474d49,0x46454946,0x45434645,0x43424443,0x42414242,0x41404141,0x41404141,0x40404140,0x41414141,0x41414241,0x43424443,0x44434644,0x46454946,0x49474c49,0x4c49514c,0x4f4c554f,0x534e5a53,0x57515f57,0x5b54645b,0x5f586a5f,0x645c7064,0x69607769,0x6e647c6e,
	0x6f667e6f,0x6b62786b,0x655d7165,0x5f596a5f,0x5b55655b,0x56515f56,0x534e5953,0x4f4b544f,0x4c49504c,0x49474c49,0x46454946,0x44434644,0x43424443,0x41414241,0x40404140,0x40404040,0x40404040,0x41414141,0x41414241,0x42424342,0x44434644,0x46454946,0x49474c49,0x4b49504b,0x4f4b554f,0x534e5a53,0x56515f56,0x5a54645a,0x5f586a5f,0x645c7064,0x69607669,0x6d647c6d,
	0x6f667d6f,0x6a62786a,0x655d7165,0x5f596a5f,0x5b55645b,0x56515f56,0x524e5952,0x4f4b544f,0x4c49504c,0x49474c49,0x46454846,0x44434644,0x42424442,0x41414241,0x40404140,0x40404040,0x40404040,0x40404140,0x41414241,0x42424342,0x44434644,0x46444846,0x48464c48,0x4b48504b,0x4f4b544f,0x524e5a52,0x57515f57,0x5a54645a,0x5f58695f,0x645b7064,0x69607669,0x6d637c6d,
	0x6f667e6f,0x6a62786a,0x655d7165,0x5f596a5f,0x5b55655b,0x56515f56,0x534e5953,0x4f4c544f,0x4b49504b,0x49474c49,0x46454946,0x44434644,0x42424342,0x41414241,0x40404140,0x40404040,0x40404040,0x40404140,0x41414241,0x42424342,0x44434644,0x46444846,0x48464c48,0x4b48504b,0x4f4b544f,0x524e5a52,0x56515f56,0x5a54645a,0x5f57695f,0x635b7063,0x69607669,0x6d637c6d,
	0x6f667e6f,0x6b62786b,0x655d7165,0x60596a60,0x5b55655b,0x56515f56,0x534e5953,0x4f4c554f,0x4c49504c,0x49474c49,0x46454946,0x44434644,0x43424443,0x41414241,0x40404140,0x40404040,0x40404040,0x41404141,0x41414241,0x42424442,0x44434644,0x46444946,0x48464c48,0x4b49504b,0x4f4b544f,0x524e5952,0x56515f56,0x5a54655a,0x5f576a5f,0x645b7064,0x69607769,0x6d637c6d,
	0x70667e70,0x6b62786b,0x655d7165,0x60596b60,0x5b55655b,0x57525f57,0x534f5a53,0x4f4c554f,0x4c49504c,0x49484d49,0x47454947,0x45444645,0x43424443,0x42414242,0x41404141,0x40404140,0x40404140,0x41414141,0x42414242,0x43424443,0x44434644,0x46454946,0x49474c49,0x4c49504c,0x4f4b554f,0x534e5a53,0x57515f57,0x5b54655b,0x5f586a5f,0x645b7064,0x69607769,0x6e647d6e,
	0x70677f70,0x6b63796b,0x665e7266,0x60596b60,0x5c55665c,0x57526057,0x534f5a53,0x4f4c564f,0x4d4a514d,0x4a484e4a,0x47464a47,0x45444745,0x43434543,0x42414342,0x41414241,0x41414141,0x40404140,0x41414241,0x42414342,0x43424543,0x45434745,0x47454947,0x49474d49,0x4c49514c,0x504c5650,0x534e5b53,0x57516057,0x5b54655b,0x5f586b5f,0x645c7164,0x6a61786a,0x6e647d6e,
	0x71677f71,0x6c637a6c,0x665f7366,0x615a6c61,0x5c56665c,0x58536058,0x54505b54,0x504d5750,0x4d4a524d,0x4a484e4a,0x48464b48,0x45444845,0x44434544,0x42424442,0x42414342,0x41414241,0x41414241,0x41414241,0x42424342,0x43434543,0x45444745,0x47454a47,0x4a474e4a,0x4d4a524d,0x504c5750,0x544f5b54,0x57526057,0x5c55665c,0x60586b60,0x655c7265,0x6a61786a,0x6f657e6f,
	0x72688072,0x6d647b6d,0x675f7367,0x625b6d62,0x5d57675d,0x58536158,0x55505c55,0x514d5751,0x4e4b534e,0x4b494f4b,0x48474c48,0x46454946,0x44444644,0x43434543,0x42424342,0x42424342,0x42424342,0x42424342,0x43424443,0x44434644,0x46444846,0x48464b48,0x4b484f4b,0x4e4a534e,0x514d5851,0x544f5c54,0x58526158,0x5c55675c,0x60596c60,0x665d7366,0x6b627a6b,0x70657f70,
	0x73688173,0x6e657b6e,0x68607468,0x625b6d62,0x5e58685e,0x59546259,0x55515d55,0x524e5852,0x4e4b544e,0x4c49504c,0x49474d49,0x47464a47,0x45444845,0x44434644,0x43434543,0x43424443,0x43424443,0x43424443,0x44434644,0x45444745,0x47454a47,0x49474d49,0x4b49504b,0x4e4b544e,0x524d5852,0x55505d55,0x59536259,0x5d56685d,0x61596d61,0x665e7466,0x6c637b6c,0x70667f70,
	0x736a8273,0x6f667d6f,0x69617569,0x635c6f63,0x5f58695f,0x5a55645a,0x56515e56,0x534f5a53,0x4f4d554f,0x4d4a514d,0x4a484e4a,0x48474b48,0x46454946,0x45444745,0x44434644,0x44434544,0x44434544,0x44434644,0x45444745,0x46444946,0x48464b48,0x4a474e4a,0x4c4a514c,0x4f4b554f,0x524e5a52,0x56505e56,0x59536359,0x5d56685d,0x625a6e62,0x675e7567,0x6d637c6d,0x71678071,
	0x746b8374,0x70677e70,0x6a62776a,0x645d7064,0x60596a60,0x5b55655b,0x57525f57,0x534f5b53,0x504d5750,0x4e4b534e,0x4b49504b,0x49474d49,0x47464a47,0x46444846,0x45444745,0x45444745,0x44444644,0x45444745,0x46444846,0x47464a47,0x49474c49,0x4b484f4b,0x4d4a534d,0x504c5750,0x534f5b53,0x57516057,0x5a54645a,0x5e576a5e,0x635b6f63,0x685f7568,0x6e647d6e,0x73688273,
	0x766c8476,0x71687f71,0x6b63786b,0x655e7265,0x615a6c61,0x5c56665c,0x58536158,0x55505c55,0x514e5851,0x4f4c544f,0x4c4a514c,0x4a484e4a,0x48474c48,0x47464a47,0x46454946,0x46444846,0x46444846,0x46454946,0x47454a47,0x48474c48,0x4a484e4a,0x4c49514c,0x4f4b544f,0x514d5851,0x554f5d55,0x58526158,0x5b55665b,0x5f586b5f,0x645c7164,0x69607769,0x6f657e6f,0x74698374,
	0x776d8677,0x72698172,0x6d647a6d,0x675f7367,0x625b6d62,0x5d57685d,0x59546359,0x56515e56,0x534f5a53,0x504d5650,0x4e4b534e,0x4b49504b,0x4a484e4a,0x48474c48,0x48464b48,0x47464a47,0x47454a47,0x47464a47,0x48474c48,0x4a474d4a,0x4b49504b,0x4d4a534d,0x504c5650,0x524e5952,0x55505e55,0x58536258,0x5c55675c,0x60596d60,0x655d7365,0x6b61796b,0x71668071,0x756a8475,
	0x786e8878,0x746b8374,0x6e657c6e,0x68617568,0x635c6f63,0x5f58695f,0x5a55645a,0x57526057,0x54505c54,0x524e5852,0x4f4c554f,0x4d4a524d,0x4b484f4b,0x4a484e4a,0x49474c49,0x48474c48,0x48474c48,0x49474d49,0x4a474d4a,0x4b48504b,0x4d4a524d,0x4f4b544f,0x514d5851,0x544f5b54,0x57516057,0x5a53645a,0x5e56695e,0x625a6e62,0x665e7466,0x6c627b6c,0x72688172,0x766b8676,
	0x7a70897a,0x756c8475,0x6f677d6f,0x6a62776a,0x655d7165,0x60596b60,0x5c56665c,0x58536258,0x56515e56,0x534f5a53,0x514d5751,0x4e4b544e,0x4d4a524d,0x4b49504b,0x4b484f4b,0x4a484e4a,0x4a484e4a,0x4b484f4b,0x4b49504b,0x4d4a524d,0x4e4b544e,0x504c5750,0x524e5a52,0x554f5d55,0x58526258,0x5b55665b,0x5f586a5f,0x635b7063,0x685f7568,0x6d647c6d,0x73698373,0x786d8878,
	0x7c718c7c,0x776e8677,0x71698071,0x6c63796c,0x665f7366,0x625b6d62,0x5e57685e,0x5a55645a,0x57526057,0x55505c55,0x524e5952,0x504c5650,0x4e4b544e,0x4d4a524d,0x4c4a514c,0x4c49504c,0x4c49504c,0x4c49514c,0x4d4a524d,0x4e4b544e,0x504c5650,0x524d5952,0x544f5c54,0x57515f57,0x59536359,0x5d56685d,0x61596c61,0x655c7265,0x6a61786a,0x6f657e6f,0x756b8575,0x796e8a79,
	0x7d738d7d,0x796f8879,0x736a8173,0x6d647a6d,0x67607467,0x635c6f63,0x5f586a5f,0x5b55655b,0x58536158,0x56515e56,0x534f5b53,0x514d5851,0x504c5650,0x4f4b544f,0x4e4a534e,0x4d4a524d,0x4d4a534d,0x4e4a534e,0x4f4b544f,0x4f4c554f,0x514d5851,0x534e5a53,0x55505e55,0x58526158,0x5b54655b,0x5e56695e,0x625a6e62,0x665e7466,0x6b627a6b,0x71678071,0x766c8676,0x7b6f8c7b
};

static int isp_param_lns_lut_960p[1024] = {
	0x8a7f9a8a,0x857b9585,0x7f758f7f,0x7a71897a,0x756c8375,0x71677f71,0x6c647a6c,0x69617669,0x665e7266,0x635b6e63,0x615a6c61,0x5e58695e,0x5d56675d,0x5c56665c,0x5c55655c,0x5b55645b,0x5b55645b,0x5b55655b,0x5c55665c,0x5d56675d,0x5f58695f,0x60596b60,0x625b6e62,0x655d7165,0x68607568,0x6c637a6c,0x6f677e6f,0x746b8374,0x796f8979,0x7e748f7e,0x83799683,0x897d9c89,
	0x887d9788,0x83799283,0x7e748c7e,0x786f8678,0x736a8073,0x6e667b6e,0x6a62766a,0x675f7267,0x635c6e63,0x615a6c61,0x5e58685e,0x5c57665c,0x5b55645b,0x5a54635a,0x59546259,0x59536159,0x59536159,0x59536259,0x5a54625a,0x5b55645b,0x5c56665c,0x5e57685e,0x60596b60,0x625b6e62,0x655e7265,0x69617669,0x6d657b6d,0x71698071,0x766e8676,0x7b728c7b,0x82779282,0x877c9987,
	0x847a9384,0x80768f80,0x7a70887a,0x756c8375,0x70677d70,0x6b63776b,0x675f7267,0x645c6f64,0x605a6a60,0x5e57675e,0x5c56645c,0x5a54625a,0x58536058,0x57525f57,0x56515e56,0x56515d56,0x56515e56,0x56515e56,0x57525f57,0x58536058,0x59536259,0x5b55645b,0x5d57675d,0x5f596a5f,0x625c6e62,0x665e7366,0x6a62776a,0x6e667c6e,0x746b8274,0x79708879,0x7f758f7f,0x83799483,
	0x82779082,0x7d748c7d,0x776e8577,0x72697f72,0x6d657a6d,0x68607468,0x645c6f64,0x615a6b61,0x5e58675e,0x5b56645b,0x59546159,0x57525f57,0x56515d56,0x55505b55,0x544f5a54,0x534f5a53,0x534f5a53,0x534f5a53,0x54505b54,0x55505d55,0x57525f57,0x58536158,0x5a54645a,0x5d56675d,0x60596b60,0x635c6f63,0x67607467,0x6c647a6c,0x71688071,0x766d8576,0x7c728b7c,0x80769180,
	0x7f748e7f,0x7a71897a,0x746c8374,0x6f677d6f,0x6a62776a,0x665e7166,0x615b6c61,0x5e58685e,0x5c56655c,0x59536159,0x57525e57,0x55505c55,0x534f5a53,0x524e5852,0x514d5751,0x504d5650,0x504d5650,0x514d5751,0x514d5851,0x534e5953,0x544f5b54,0x56515e56,0x58536158,0x5a55645a,0x5d57685d,0x60596c60,0x645d7164,0x69617769,0x6e657d6e,0x736a8373,0x79708979,0x7d738e7d,
	0x7c728c7c,0x786f8778,0x72698072,0x6c64796c,0x67607467,0x625c6e62,0x5f58695f,0x5c56655c,0x59546259,0x57525f57,0x54505b54,0x524e5852,0x514d5651,0x4f4c554f,0x4f4b544f,0x4e4b534e,0x4e4b534e,0x4e4b544e,0x4f4b554f,0x504d5650,0x524e5852,0x534f5b53,0x56515e56,0x58536258,0x5b55655b,0x5e58695e,0x625b6e62,0x665f7466,0x6b637a6b,0x71688071,0x776e8677,0x7b718c7b,
	0x7a70897a,0x756d8475,0x6f677d6f,0x6a62766a,0x655e7165,0x615a6b61,0x5d57675d,0x5a54625a,0x57525f57,0x54505b54,0x524e5852,0x504d5650,0x4e4b534e,0x4d4a524d,0x4c49504c,0x4c49504c,0x4c49504c,0x4c49504c,0x4d4a514d,0x4e4b534e,0x504c5550,0x514d5851,0x544f5b54,0x56515e56,0x59536259,0x5c56675c,0x60596c60,0x645d7064,0x69617669,0x6f667d6f,0x756b8375,0x796f8979,
	0x786f8778,0x736b8173,0x6d657b6d,0x68617468,0x635c6e63,0x5e58695e,0x5b55645b,0x58536058,0x55515c55,0x524f5852,0x504d5550,0x4e4b524e,0x4c49504c,0x4b494f4b,0x4a484d4a,0x49474d49,0x49474d49,0x4a474d4a,0x4a484e4a,0x4c49504c,0x4d4a524d,0x4f4c554f,0x524e5852,0x54505b54,0x57526057,0x5b55645b,0x5e58685e,0x625b6e62,0x675f7467,0x6d647a6d,0x72698172,0x776d8677,
	0x766d8576,0x72698072,0x6b64786b,0x665f7266,0x615b6c61,0x5d57675d,0x59546259,0x56525e56,0x53505a53,0x514e5651,0x4e4b534e,0x4c4a504c,0x4a484e4a,0x49474c49,0x48464b48,0x47464a47,0x47464a47,0x47464a47,0x49464c49,0x4a484e4a,0x4c49504c,0x4d4b524d,0x504c5650,0x534f5a53,0x56515e56,0x59536259,0x5d57675d,0x615a6c61,0x655e7265,0x6b62786b,0x71687f71,0x756c8475,
	0x746c8374,0x70687e70,0x6a63766a,0x655e7065,0x60596a60,0x5b56655b,0x58536058,0x54505b54,0x524e5852,0x4f4c544f,0x4c4a514c,0x4a484e4a,0x48474b48,0x47454947,0x46454846,0x46444746,0x46444846,0x46454846,0x47454947,0x48464b48,0x4a484e4a,0x4c49504c,0x4e4b544e,0x514d5751,0x54505b54,0x57536057,0x5b55655b,0x5f596a5f,0x645c7064,0x69617569,0x6f667d6f,0x746a8274,
	0x736a8173,0x6e677c6e,0x68617568,0x635c6e63,0x5e58685e,0x5a55635a,0x56525e56,0x534f5a53,0x504d5650,0x4d4b524d,0x4b484f4b,0x49474b49,0x47454947,0x45444745,0x45444645,0x44434544,0x44434544,0x45434645,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4d4a524d,0x504d5550,0x534f5a53,0x56515e56,0x5a54635a,0x5e58695e,0x625b6e62,0x68607468,0x6d657b6d,0x72698172,
	0x71698071,0x6d657a6d,0x67607367,0x625b6d62,0x5d57675d,0x59546259,0x55515c55,0x524e5852,0x4f4c544f,0x4c4a504c,0x4a484d4a,0x47464a47,0x46444746,0x44434644,0x44424444,0x43424443,0x43424443,0x44424544,0x44434644,0x45444745,0x47454a47,0x49474c49,0x4c49504c,0x4e4b544e,0x514e5851,0x55515d55,0x59536259,0x5d57675d,0x615a6d61,0x675f7367,0x6c637a6c,0x71677f71,
	0x70687e70,0x6c64796c,0x665f7266,0x615a6b61,0x5c56665c,0x58536158,0x54505b54,0x514d5751,0x4e4b534e,0x4b494f4b,0x48474b48,0x46454846,0x44434644,0x43424443,0x42424342,0x42414242,0x42414342,0x43424343,0x43424443,0x44434644,0x46454846,0x48464b48,0x4a484e4a,0x4d4a524d,0x504d5650,0x54505c54,0x58536058,0x5c56665c,0x605a6b60,0x655e7265,0x6b62786b,0x6f667e6f,
	0x70677d70,0x6b63786b,0x655e7165,0x605a6b60,0x5b56655b,0x57525f57,0x534f5a53,0x504d5550,0x4d4a514d,0x4a484e4a,0x47464a47,0x45444745,0x44434544,0x42424342,0x41414241,0x41414141,0x41414141,0x42414242,0x42424342,0x44434544,0x45444745,0x47454a47,0x4a474d4a,0x4c4a514c,0x504c5650,0x534f5b53,0x57525f57,0x5b55655b,0x5f596a5f,0x645d7064,0x6a62776a,0x6f657d6f,
	0x6f677c6f,0x6b62776b,0x655e7065,0x5f596a5f,0x5b55645b,0x56525f56,0x534f5953,0x4f4c554f,0x4c4a504c,0x49484d49,0x47454947,0x45444645,0x43424443,0x42414242,0x41414141,0x41404141,0x41414141,0x41414141,0x42414242,0x43424443,0x44434644,0x46454946,0x49474c49,0x4c49504c,0x4f4c554f,0x534f5a53,0x56525f56,0x5b55645b,0x5f586a5f,0x645d7064,0x69617669,0x6d657c6d,
	0x6f667c6f,0x6a62776a,0x645d6f64,0x5f59695f,0x5b55635b,0x56525e56,0x524f5952,0x4f4c544f,0x4c4a504c,0x49474c49,0x46454946,0x44434644,0x43424443,0x41414241,0x40414140,0x40404040,0x40404040,0x41404141,0x42414242,0x43424343,0x44434644,0x46454846,0x48464c48,0x4b48504b,0x4f4b544f,0x524e5952,0x56515e56,0x5a55645a,0x5f58695f,0x645d6f64,0x69617669,0x6d647c6d,
	0x6e667d6e,0x6a62776a,0x645d6f64,0x5f59695f,0x5a55645a,0x56525e56,0x524f5952,0x4e4c544e,0x4c4a504c,0x49474c49,0x46454846,0x44434644,0x43424343,0x41414241,0x40404040,0x40404040,0x40404040,0x41404141,0x41414241,0x42424342,0x44434544,0x46444846,0x48464c48,0x4b48504b,0x4f4b544f,0x524e5952,0x56515e56,0x5a54645a,0x5f58695f,0x645c6f64,0x69617669,0x6d647b6d,
	0x6f667c6f,0x6a62776a,0x645d6f64,0x5f59695f,0x5a55645a,0x56525e56,0x524f5952,0x4f4c544f,0x4c49504c,0x49474c49,0x46454846,0x44444644,0x43424343,0x41414241,0x41404141,0x40404040,0x40404040,0x41404141,0x41414241,0x43424443,0x44434644,0x46444846,0x48464c48,0x4b49504b,0x4f4c544f,0x524e5952,0x56515e56,0x5a54645a,0x5f58695f,0x645c6f64,0x69617669,0x6d657c6d,
	0x6f677c6f,0x6b63776b,0x655e7065,0x5f596a5f,0x5b55645b,0x56525e56,0x534f5953,0x4f4c544f,0x4c4a504c,0x49474c49,0x47454947,0x45444645,0x43424443,0x42414242,0x41404141,0x40404140,0x40404140,0x41414141,0x41414241,0x43424443,0x44434644,0x46444946,0x49474c49,0x4c49504c,0x4f4c554f,0x534e5a53,0x56515f56,0x5a54645a,0x5f586a5f,0x645c7064,0x69617769,0x6e657c6e,
	0x70677d70,0x6b63786b,0x655e7165,0x605a6b60,0x5b56655b,0x57525f57,0x534f5a53,0x4f4c554f,0x4c4a514c,0x4a484e4a,0x47464a47,0x45444745,0x43434543,0x42424342,0x41414241,0x41414141,0x41414141,0x41414241,0x42424342,0x43424443,0x45444745,0x47454947,0x49474d49,0x4c4a514c,0x504c5650,0x534f5a53,0x57526057,0x5b55655b,0x5f596b5f,0x645d7064,0x6a62776a,0x6e657d6e,
	0x71687f71,0x6c64796c,0x665f7266,0x615b6c61,0x5c57665c,0x58536058,0x54505b54,0x514d5751,0x4d4b524d,0x4b494f4b,0x48474b48,0x46454846,0x44434644,0x43424443,0x42424342,0x42414242,0x42414242,0x42414342,0x43424443,0x44434544,0x45444845,0x48464b48,0x4a484e4a,0x4d4a524d,0x504d5750,0x54505c54,0x58536158,0x5c56665c,0x60596b60,0x655e7265,0x6b62786b,0x6f667e6f,
	0x72698072,0x6d667b6d,0x67607367,0x625c6d62,0x5d57675d,0x59546259,0x55515d55,0x514e5851,0x4e4c544e,0x4c4a504c,0x49484d49,0x47454a47,0x45444745,0x44434644,0x43434443,0x43424443,0x43424443,0x43424443,0x44434544,0x45444745,0x47454a47,0x49474d49,0x4c49504c,0x4e4b544e,0x524e5852,0x55505d55,0x58536258,0x5d56675d,0x615a6d61,0x665e7366,0x6c637a6c,0x70677f70,
	0x746b8274,0x6f677c6f,0x69627569,0x635d6f63,0x5e59695e,0x5a55635a,0x56525f56,0x534f5a53,0x4f4d564f,0x4d4b524d,0x4a494e4a,0x48474c48,0x47454947,0x45444745,0x44444644,0x44434644,0x44434644,0x44444644,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4d4a524d,0x4f4c554f,0x534f5a53,0x56515f56,0x5a54635a,0x5e58695e,0x625b6e62,0x67607567,0x6d657c6d,0x72688172,
	0x756c8475,0x70687e70,0x6a63776a,0x655e7065,0x605a6b60,0x5b56655b,0x57536057,0x54505c54,0x514e5751,0x4e4c544e,0x4c4a504c,0x4a484d4a,0x48474b48,0x47464947,0x46454846,0x45454845,0x45444845,0x46454846,0x47454a47,0x48464b48,0x4a484e4a,0x4c49504c,0x4e4b544e,0x514d5751,0x54505c54,0x57526157,0x5b55655b,0x5f586b5f,0x645c7064,0x69617669,0x6f667e6f,0x736a8373,
	0x766d8676,0x726a8072,0x6c65796c,0x675f7367,0x615b6c61,0x5d57675d,0x59546259,0x56525e56,0x524f5952,0x504d5650,0x4d4b524d,0x4b49504b,0x4a484e4a,0x48474c48,0x48464b48,0x47464a47,0x47464a47,0x48464a48,0x48474c48,0x4a484d4a,0x4b49504b,0x4d4b534d,0x504c5650,0x524e5a52,0x55515e55,0x58536258,0x5c56675c,0x605a6c60,0x655e7265,0x6a62796a,0x71678071,0x756b8475,
	0x786f8878,0x746c8274,0x6e667b6e,0x68617468,0x635d6e63,0x5e59695e,0x5b56645b,0x57536057,0x54505c54,0x524f5852,0x4f4c554f,0x4d4b524d,0x4c49504c,0x4a484e4a,0x49484d49,0x49474d49,0x49474d49,0x49484d49,0x4b484e4b,0x4c49504c,0x4d4a524d,0x4f4c554f,0x514e5851,0x54505c54,0x57526057,0x5a54645a,0x5e57695e,0x625b6f62,0x675f7467,0x6d647b6d,0x72698272,0x766d8776,
	0x7a718a7a,0x776d8577,0x70687e70,0x6a63776a,0x655f7165,0x615a6c61,0x5d57675d,0x59546259,0x56525f56,0x54505b54,0x514e5851,0x4f4c554f,0x4e4b534e,0x4d4a514d,0x4c49504c,0x4b49504b,0x4b49504b,0x4c49504c,0x4c4a514c,0x4e4b534e,0x4f4c554f,0x514d5851,0x534f5b53,0x56515e56,0x59536359,0x5c56675c,0x60596c60,0x645d7164,0x69617769,0x6e667e6e,0x746b8474,0x796f8a79,
	0x7d738d7d,0x79708879,0x726b8172,0x6d657a6d,0x67617467,0x635d6e63,0x5f59695f,0x5c56655c,0x58536158,0x56515e56,0x54505b54,0x514e5851,0x504d5650,0x4f4c544f,0x4e4b534e,0x4e4b534e,0x4d4b534d,0x4e4b534e,0x4f4c544f,0x504d5650,0x514e5851,0x534f5b53,0x55515e55,0x58526158,0x5b55655b,0x5e58695e,0x625b6f62,0x665e7466,0x6b637a6b,0x71688071,0x776d8777,0x7b718b7b,
	0x7f768f7f,0x7b728b7b,0x756d8375,0x6f687d6f,0x6a63776a,0x655f7265,0x615b6c61,0x5e58685e,0x5b55645b,0x58536158,0x56515e56,0x54505b54,0x524e5952,0x514e5851,0x504d5750,0x504d5650,0x504d5650,0x514d5751,0x514d5851,0x524e5952,0x544f5c54,0x56515e56,0x57526157,0x5a54645a,0x5d57685d,0x615a6d61,0x645d7264,0x69617769,0x6e667d6e,0x746a8374,0x796f8979,0x7d728e7d,
	0x82799282,0x7e748d7e,0x78708778,0x736a8173,0x6d667a6d,0x68617468,0x645e7064,0x605a6b60,0x5e58685e,0x5b55645b,0x58536158,0x56525f56,0x55505c55,0x54505b54,0x534f5a53,0x534f5a53,0x534f5a53,0x534f5a53,0x54505c54,0x55505d55,0x56515f56,0x58536158,0x5a54645a,0x5d56675d,0x60596c60,0x645c7064,0x67607567,0x6c647a6c,0x71688071,0x766d8676,0x7b718c7b,0x7f75907f,
	0x857c9585,0x81789181,0x7b728a7b,0x766e8476,0x70697d70,0x6b64786b,0x67607467,0x635d6f63,0x605a6b60,0x5d57685d,0x5b55645b,0x59546259,0x57526057,0x56515f56,0x56515e56,0x55515d55,0x55515e55,0x55515e55,0x56515f56,0x57526057,0x59536259,0x5b55655b,0x5d57675d,0x5f596b5f,0x635b6e63,0x665f7366,0x6b63786b,0x6f677e6f,0x746b8374,0x796f8979,0x7e738e7e,0x80769280,
	0x887e9888,0x837a9383,0x7d758d7d,0x786f8678,0x726a8172,0x6d667b6d,0x69627669,0x655f7265,0x635c6f63,0x5f596a5f,0x5d57675d,0x5b55655b,0x59546359,0x58536258,0x58536158,0x58526058,0x58526058,0x58536158,0x58536258,0x59546359,0x5b55655b,0x5d57675d,0x5f586a5f,0x615b6e61,0x655d7265,0x69617669,0x6d657b6d,0x71698071,0x766d8676,0x7b718b7b,0x7f75907f,0x81769381
};

static int isp_param_lns_lut_1080p[1024] = {
	0x635c6d63,0x605b6b60,0x5d57675d,0x5b55645b,0x59546159,0x57525e57,0x55515c55,0x534f5953,0x514e5651,0x4f4c544f,0x4e4b524e,0x4d4a514d,0x4c494f4c,0x4b484e4b,0x4a484d4a,0x4a484d4a,0x4a484d4a,0x4a484d4a,0x4a484e4a,0x4b494f4b,0x4c4a504c,0x4d4a524d,0x4f4c534f,0x504d5550,0x524f5852,0x54505b54,0x56515d56,0x58536058,0x5a55645a,0x5d57675d,0x60596a60,0x625c6d62,
	0x625c6d62,0x605a6960,0x5d57665d,0x5a55635a,0x58535f58,0x56525d56,0x54505a54,0x524f5852,0x504d5550,0x4f4c534f,0x4d4a514d,0x4c494f4c,0x4b494e4b,0x4a484d4a,0x49474c49,0x49474c49,0x49474c49,0x49474c49,0x4a484d4a,0x4a484e4a,0x4b494f4b,0x4c4a514c,0x4e4b534e,0x4f4c544f,0x514d5751,0x534f5953,0x55515c55,0x57525f57,0x5a54625a,0x5c57665c,0x5f59695f,0x615b6c61,
	0x615b6b61,0x5e59685e,0x5c56655c,0x59546259,0x57525f57,0x55515c55,0x534f5953,0x514e5751,0x4f4c544f,0x4e4b524e,0x4c4a504c,0x4b484e4b,0x49474d49,0x49474c49,0x48464b48,0x48464a48,0x48464a48,0x48464b48,0x48474b48,0x49474c49,0x4a484d4a,0x4b494f4b,0x4d4a514d,0x4e4b534e,0x504d5650,0x524e5852,0x54505b54,0x56525e56,0x59546159,0x5b56655b,0x5e58685e,0x605a6b60,
	0x605a6a60,0x5e58685e,0x5b55645b,0x58536058,0x56515d56,0x54505a54,0x524e5752,0x504d5550,0x4e4b534e,0x4c4a504c,0x4b494e4b,0x49474d49,0x48474b48,0x48464a48,0x47454947,0x47454947,0x47454947,0x47454947,0x47464a47,0x48464b48,0x49474c49,0x4a484e4a,0x4c49504c,0x4d4a524d,0x4f4c544f,0x514d5751,0x534f5a53,0x55515d55,0x58536058,0x5a55635a,0x5d57675d,0x60596a60,
	0x5f59695f,0x5c57665c,0x5a55635a,0x57535e57,0x55515c55,0x534f5953,0x514e5751,0x4f4c534f,0x4d4a514d,0x4b494f4b,0x4a484d4a,0x48474b48,0x48464a48,0x47454947,0x46454846,0x46444746,0x45444845,0x45444845,0x46454846,0x47454947,0x48464b48,0x49474c49,0x4b484e4b,0x4c4a504c,0x4e4b534e,0x504d5550,0x524e5852,0x54505c54,0x57525f57,0x5a54625a,0x5d57665d,0x5f59685f,
	0x5e58695e,0x5c56655c,0x59546159,0x57525e57,0x54505b54,0x524e5852,0x504d5550,0x4e4b524e,0x4c4a504c,0x4a484e4a,0x49474c49,0x48464a48,0x46454946,0x46444746,0x45444745,0x45434645,0x45434645,0x45434745,0x45444745,0x46454946,0x47464a47,0x48464b48,0x4a474d4a,0x4b494f4b,0x4d4a524d,0x4f4c554f,0x514e5851,0x54505a54,0x56515e56,0x59546159,0x5c56655c,0x5e58685e,
	0x5e58675e,0x5c56655c,0x59546159,0x55525d55,0x53505a53,0x524e5752,0x504c5550,0x4d4b524d,0x4b494f4b,0x4a484d4a,0x48464b48,0x47454947,0x46444846,0x45444745,0x44434644,0x44434544,0x44434544,0x44434644,0x45434745,0x45444745,0x46454946,0x48464a48,0x49474c49,0x4b484f4b,0x4c49514c,0x4e4b544e,0x504d5750,0x534f5a53,0x56515d56,0x58536158,0x5b56645b,0x5d58675d,
	0x5d57675d,0x5b55635b,0x58536058,0x55515c55,0x534f5953,0x514d5651,0x4f4c544f,0x4c4a514c,0x4a494e4a,0x49474b49,0x47464a47,0x46444846,0x45444645,0x44434544,0x44434544,0x43424443,0x43424443,0x44434544,0x44434644,0x45444745,0x46444846,0x47464947,0x48464b48,0x4a474e4a,0x4c49504c,0x4e4b534e,0x504d5550,0x524e5952,0x55515c55,0x58536058,0x5b55645b,0x5c57665c,
	0x5d57665d,0x5a55635a,0x57535f57,0x54505b54,0x524e5852,0x504d5550,0x4e4b534e,0x4c49504c,0x4a484d4a,0x48464b48,0x46454946,0x45444745,0x44434544,0x43434443,0x43424443,0x42424342,0x43424343,0x43424443,0x43424543,0x44434544,0x45434745,0x46454846,0x47464a47,0x49474c49,0x4b494f4b,0x4d4a524d,0x4f4c554f,0x514e5851,0x54505b54,0x57525f57,0x5a54635a,0x5c56655c,
	0x5c56655c,0x59546259,0x57525f57,0x54505b54,0x514e5751,0x4f4c554f,0x4d4b524d,0x4b494f4b,0x49474c49,0x48464a48,0x46444846,0x45444645,0x44434544,0x43424443,0x42414342,0x42414342,0x42424342,0x43424343,0x43424443,0x44434544,0x44434644,0x45444745,0x47464a47,0x48474c48,0x4a484e4a,0x4c4a514c,0x4e4b544e,0x514e5751,0x544f5b54,0x56525e56,0x59546259,0x5b56655b,
	0x5b56655b,0x59546259,0x56525e56,0x53505b53,0x514e5751,0x4f4c544f,0x4d4b514d,0x4a494e4a,0x48474c48,0x47454947,0x45444745,0x44434544,0x43424443,0x42424342,0x42414242,0x42414242,0x42414242,0x42414342,0x42424342,0x43424443,0x44434544,0x45444745,0x46454946,0x48464b48,0x4a474d4a,0x4c49504c,0x4e4b534e,0x504d5650,0x534f5a53,0x56515d56,0x59546159,0x5b55645b,
	0x5b56645b,0x59546159,0x56515d56,0x534f5a53,0x504e5650,0x4f4c544f,0x4d4a504d,0x4a484e4a,0x48474b48,0x46454846,0x45444745,0x44434544,0x43424443,0x42414342,0x41414241,0x41414241,0x41414241,0x42414242,0x42414342,0x43424343,0x43434543,0x45434645,0x46454846,0x48464a48,0x4a474d4a,0x4b49504b,0x4e4b524e,0x504d5650,0x534f5a53,0x56515d56,0x58536158,0x5b55645b,
	0x5a55645a,0x58536158,0x55515d55,0x534f5953,0x504d5650,0x4e4b534e,0x4c4a504c,0x4a484d4a,0x48464a48,0x46454846,0x44434644,0x43424443,0x42424342,0x42414242,0x41414241,0x41414141,0x41414141,0x41414241,0x41414241,0x42424342,0x43424443,0x44434644,0x45444845,0x47464a47,0x49474c49,0x4b494f4b,0x4d4b524d,0x504c5550,0x524e5952,0x55515d55,0x58536058,0x5a55635a,
	0x5a55645a,0x58536158,0x55515c55,0x534f5853,0x504d5650,0x4e4b524e,0x4b4a4f4b,0x49474d49,0x47464a47,0x46454746,0x44434544,0x43424443,0x42424342,0x41414241,0x41404141,0x41414141,0x41404141,0x41414141,0x41414241,0x42424342,0x43424443,0x44434644,0x45444745,0x47454a47,0x48474c48,0x4a484e4a,0x4d4a524d,0x504c5550,0x524e5952,0x55505c55,0x58536158,0x5a55635a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5852,0x504d5550,0x4d4b524d,0x4b494f4b,0x49474c49,0x47464947,0x46444746,0x44434544,0x43424343,0x42414242,0x41414141,0x41404141,0x40404140,0x41404141,0x41414141,0x41414241,0x42414242,0x43424343,0x44434544,0x45444745,0x47454947,0x48464c48,0x4a484f4a,0x4d4a514d,0x4f4c554f,0x524e5852,0x55505c55,0x58536058,0x5a54635a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5852,0x4f4d554f,0x4d4b514d,0x4b494f4b,0x49484c49,0x47464947,0x45444745,0x44434544,0x43424343,0x42414242,0x41414141,0x41404141,0x41404141,0x40404040,0x41404141,0x41414141,0x42414242,0x42424342,0x44424544,0x45444745,0x47454947,0x48464b48,0x4a484e4a,0x4c4a524c,0x4f4c554f,0x524e5852,0x55505c55,0x57526057,0x5a54625a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5852,0x4f4c554f,0x4d4b514d,0x4b494f4b,0x49474c49,0x47464947,0x45444745,0x44434544,0x42424342,0x41414241,0x41414141,0x40404040,0x40404040,0x40404040,0x41414141,0x41414141,0x41414241,0x42424342,0x43434543,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4c4a514c,0x4f4c544f,0x524e5852,0x54505c54,0x57526057,0x5a55635a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5952,0x504c5550,0x4d4b524d,0x4b494f4b,0x49474c49,0x47464947,0x45444745,0x44434544,0x42424342,0x41414241,0x41414141,0x41414141,0x40404040,0x40404040,0x41404141,0x41414241,0x42414242,0x42424342,0x43424543,0x45434745,0x46454946,0x48464b48,0x4a484e4a,0x4c4a514c,0x4f4c554f,0x524e5852,0x54505c54,0x58526058,0x5a54635a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5852,0x4f4c554f,0x4d4b524d,0x4b494f4b,0x49474c49,0x47464947,0x45444745,0x44434544,0x42424342,0x42414242,0x41414141,0x40404040,0x40404140,0x40404040,0x40404140,0x41414141,0x41414241,0x42424342,0x43424543,0x45434745,0x46454846,0x48464b48,0x4a484e4a,0x4c4a514c,0x4f4c554f,0x524e5852,0x54505c54,0x57526057,0x5a54635a,
	0x5a55635a,0x58536058,0x55515c55,0x524f5952,0x504d5550,0x4d4b524d,0x4b494f4b,0x49474c49,0x47464a47,0x45444745,0x44434544,0x43424343,0x42414242,0x41414141,0x41404141,0x40404140,0x40404140,0x41414141,0x41414241,0x41414241,0x42424342,0x43434543,0x45434745,0x46454946,0x48464b48,0x4a484e4a,0x4c4a524c,0x4f4c554f,0x524e5852,0x55505c55,0x57526057,0x5a54635a,
	0x5b55635b,0x58536058,0x55515c55,0x524f5952,0x504d5550,0x4d4b524d,0x4b494f4b,0x49484d49,0x47464a47,0x45454845,0x44434544,0x43424443,0x42424242,0x41414241,0x41414141,0x40404140,0x40414140,0x41414141,0x41414241,0x42424342,0x43424443,0x44434544,0x45444745,0x46454946,0x48474c48,0x4b484e4b,0x4d4a524d,0x4f4c554f,0x524e5952,0x55505d55,0x58536058,0x5a55635a,
	0x5b56645b,0x59546159,0x55515c55,0x534f5953,0x504d5650,0x4e4b534e,0x4c4a504c,0x4a484d4a,0x48464a48,0x46454846,0x44444644,0x43424443,0x42424342,0x41414241,0x41414141,0x40404140,0x41414141,0x41414141,0x41414241,0x42414342,0x43424443,0x44434544,0x45444745,0x47454947,0x49474c49,0x4b494f4b,0x4d4a524d,0x504c5650,0x524e5952,0x55515d55,0x58536158,0x5a55645a,
	0x5b56645b,0x59546159,0x55525d55,0x534f5953,0x504d5650,0x4e4b534e,0x4c4a504c,0x4a484d4a,0x48464b48,0x46454846,0x45444645,0x43434543,0x42424342,0x42414242,0x41414241,0x41414141,0x41414241,0x41414241,0x42414242,0x42414342,0x43424543,0x44434644,0x45444845,0x47464b47,0x49474c49,0x4b494f4b,0x4e4b534e,0x504c5650,0x524f5952,0x55515d55,0x58536158,0x5b55645b,
	0x5b56645b,0x59546259,0x56525e56,0x53505a53,0x514e5751,0x4f4c544f,0x4d4a514d,0x4a484e4a,0x48474b48,0x47464947,0x45444845,0x44434544,0x43424443,0x42424342,0x42414242,0x41414241,0x41414241,0x41414241,0x42414342,0x42424442,0x43424543,0x44434644,0x46454846,0x48464a48,0x4a474e4a,0x4c49504c,0x4e4b534e,0x504d5650,0x534f5a53,0x56515d56,0x58536158,0x5b55645b,
	0x5c57655c,0x59556359,0x57525e57,0x54505b54,0x514e5751,0x4f4c544f,0x4d4a524d,0x4b494f4b,0x49474c49,0x47464a47,0x46454846,0x44444644,0x43434543,0x43424443,0x42424342,0x42414342,0x42414342,0x42424342,0x43424443,0x43424543,0x44434644,0x45444745,0x47454947,0x48464b48,0x4a484e4a,0x4c49514c,0x4e4b544e,0x514d5751,0x534f5b53,0x56515e56,0x59546259,0x5b56655b,
	0x5d57675d,0x5a55635a,0x57535f57,0x54515b54,0x524e5852,0x504d5550,0x4d4b524d,0x4b494f4b,0x49484d49,0x48464b48,0x47454947,0x45444745,0x44434644,0x43434443,0x43424443,0x42424342,0x42424442,0x43424443,0x43424443,0x44434544,0x45434645,0x46444846,0x47464a47,0x49474c49,0x4b484f4b,0x4d4a524d,0x4f4c554f,0x514d5851,0x54505c54,0x57525f57,0x59546359,0x5c56665c,
	0x5d58675d,0x5a56645a,0x58536058,0x55515c55,0x524f5952,0x504d5650,0x4e4b534e,0x4c4a504c,0x4a484e4a,0x48474c48,0x47464947,0x45454845,0x44444644,0x44434544,0x43434543,0x43434443,0x43424443,0x43424543,0x44434544,0x44434644,0x45444745,0x46454946,0x48464b48,0x49484d49,0x4b49504b,0x4d4a534d,0x4f4c564f,0x524e5952,0x54505c54,0x57526057,0x5a55645a,0x5c56665c,
	0x5e58675e,0x5b56655b,0x58546158,0x56525d56,0x53505a53,0x514e5751,0x4e4c544e,0x4d4a514d,0x4b494f4b,0x49474d49,0x48464b48,0x46454946,0x45444845,0x45444745,0x44434644,0x44434544,0x44434544,0x44434644,0x44434644,0x45444745,0x46454846,0x47464a47,0x49474c49,0x4a484e4a,0x4c49514c,0x4e4b544e,0x504d5750,0x534e5a53,0x55515d55,0x58536158,0x5b55645b,0x5d57675d,
	0x5f59685f,0x5c57665c,0x59546259,0x56525e56,0x54505b54,0x514e5851,0x4f4d554f,0x4d4b524d,0x4b49504b,0x4a484d4a,0x48474c48,0x47464a47,0x46454946,0x45444845,0x44444744,0x44444644,0x44444644,0x45444745,0x45444745,0x46454846,0x47464a47,0x48464b48,0x49474d49,0x4b484f4b,0x4d4a514d,0x4f4c544f,0x514d5751,0x534f5b53,0x55515e55,0x58536158,0x5b56655b,0x5d57685d,
	0x5f5a695f,0x5d57675d,0x5a55625a,0x57535f57,0x55515c55,0x524f5952,0x504d5650,0x4e4c534e,0x4c4a514c,0x4b494f4b,0x49484d49,0x48474b48,0x47464a47,0x46454946,0x45454845,0x45444845,0x45454845,0x45454845,0x46454846,0x47464947,0x48464b48,0x49474c49,0x4a484f4a,0x4c49514c,0x4e4b534e,0x504c5650,0x524e5952,0x54505c54,0x56525f56,0x59546259,0x5c56665c,0x5f58695f,
	0x605a6b60,0x5e58685e,0x5a56645a,0x58536058,0x55515d55,0x53505a53,0x514e5751,0x4f4c544f,0x4d4b524d,0x4b4a504b,0x4a494e4a,0x49474c49,0x48464b48,0x47464a47,0x47464947,0x46454946,0x46454946,0x47454947,0x47464a47,0x48464b48,0x49474c49,0x4a484e4a,0x4b49504b,0x4d4a524d,0x4e4c544e,0x514d5751,0x534f5a53,0x55515d55,0x57526057,0x5a54635a,0x5d57675d,0x5f596a5f,
	0x615b6c61,0x5e59685e,0x5b56645b,0x59546159,0x56525e56,0x54505b54,0x524f5952,0x504d5650,0x4e4c534e,0x4c4a514c,0x4b494f4b,0x4a484d4a,0x49474c49,0x48474b48,0x47464b47,0x47464b47,0x47464a47,0x47464a47,0x48464b48,0x48474c48,0x4a484d4a,0x4b484f4b,0x4c49514c,0x4e4b534e,0x4f4c554f,0x514e5751,0x534f5a53,0x55515d55,0x58536058,0x5a55645a,0x5d57685d,0x60596b60
};

static int isp_param_lns_lut_5m[1024] = {
	0x8d809d8d,0x867c9786,0x81769081,0x7b728a7b,0x776d8577,0x72698072,0x6e657b6e,0x6a62776a,0x675f7467,0x645c7064,0x625a6d62,0x60586a60,0x5e57695e,0x5d56675d,0x5d56665d,0x5c55665c,0x5c55665c,0x5c55665c,0x5d56675d,0x5e57685e,0x5f586a5f,0x615a6c61,0x635b6f63,0x665e7366,0x69617669,0x6d647a6d,0x70687f70,0x756c8475,0x79708979,0x7f758e7f,0x857a9685,0x8a7e9c8a,
	0x897e9989,0x857a9385,0x7f758d7f,0x7a70877a,0x746b8274,0x70677c70,0x6b63786b,0x68607468,0x655e7065,0x625b6d62,0x60596a60,0x5e57685e,0x5c56655c,0x5b55645b,0x5a54635a,0x5a54625a,0x5a54635a,0x5a54635a,0x5b55645b,0x5c56655c,0x5d57675d,0x5f58695f,0x615a6b61,0x635c6f63,0x675f7267,0x6a62776a,0x6e667c6e,0x736a8173,0x786e8678,0x7d738b7d,0x82789282,0x887d9888,
	0x867b9586,0x81789081,0x7c73897c,0x766d8376,0x72687e72,0x6c64796c,0x68607468,0x655e6f65,0x625b6c62,0x5f59685f,0x5d57665d,0x5b55635b,0x5a54625a,0x58536058,0x57525f57,0x57525e57,0x57525f57,0x57525f57,0x58536058,0x59536159,0x5a54635a,0x5c56655c,0x5e57685e,0x615a6b61,0x635c6f63,0x675f7367,0x6b63776b,0x70677d70,0x756c8275,0x79708879,0x7f758e7f,0x83799483,
	0x83799283,0x7e758c7e,0x79708679,0x736b8073,0x6e667b6e,0x69617569,0x655e7065,0x625b6c62,0x5f59685f,0x5c56655c,0x5a55625a,0x58536058,0x57525e57,0x56515c56,0x55505b55,0x54505b54,0x54505b54,0x55505b55,0x55505c55,0x56515d56,0x57536057,0x59546259,0x5b55645b,0x5e57685e,0x615a6b61,0x645d6f64,0x68607468,0x6d64796d,0x72697f72,0x776e8577,0x7c738b7c,0x81779081,
	0x80768e80,0x7c728a7c,0x766d8376,0x70677d70,0x6b63776b,0x665f7266,0x625b6c62,0x5f59685f,0x5c56655c,0x5a54625a,0x58535f58,0x56515c56,0x54505a54,0x534f5953,0x524e5752,0x514e5751,0x514e5751,0x524e5752,0x524e5852,0x534f5a53,0x55515c55,0x57525e57,0x59536159,0x5b55645b,0x5e58685e,0x615a6c61,0x665e7166,0x6a62766a,0x6f667b6f,0x746b8174,0x7a70887a,0x7d748c7d,
	0x7d748c7d,0x79708779,0x736b8073,0x6e657a6e,0x68607468,0x645c6e64,0x60596960,0x5d57655d,0x5a55625a,0x57535f57,0x55515c55,0x534f5953,0x514e5751,0x504d5550,0x4f4c544f,0x4f4b544f,0x4f4b534f,0x4f4c544f,0x504c5550,0x514d5751,0x534e5953,0x54505b54,0x56515e56,0x59546159,0x5c56655c,0x5f58695f,0x635c6e63,0x67607367,0x6d64796d,0x72697e72,0x776e8577,0x7b728a7b,
	0x7b718a7b,0x766e8476,0x71687e71,0x6b63776b,0x665e7166,0x615b6c61,0x5e57675e,0x5a55635a,0x58535f58,0x55515c55,0x534f5953,0x514d5651,0x4f4c544f,0x4e4b524e,0x4d4a514d,0x4c49504c,0x4c49504c,0x4c4a504c,0x4d4a524d,0x4e4b534e,0x504d5550,0x524e5852,0x54505b54,0x57525e57,0x5a54625a,0x5d57665d,0x605a6b60,0x655e7065,0x6a62766a,0x6f667c6f,0x756b8275,0x796f8779,
	0x796f8779,0x746c8274,0x6e667b6e,0x68617468,0x645d6e64,0x60596960,0x5b56645b,0x58536158,0x56525d56,0x534f5953,0x514d5651,0x4e4b534e,0x4d4a514d,0x4c494f4c,0x4a484e4a,0x4a484d4a,0x4a474d4a,0x4a484d4a,0x4b484f4b,0x4c49504c,0x4e4b534e,0x504c5550,0x524e5952,0x55505b55,0x58526058,0x5b55645b,0x5e58695e,0x635c6e63,0x68607368,0x6d65796d,0x736a8073,0x776e8577,
	0x766e8576,0x736a8073,0x6c65796c,0x675f7267,0x625b6c62,0x5d57675d,0x5a54625a,0x56525e56,0x54505a54,0x514e5751,0x4f4c534f,0x4c4a514c,0x4b484e4b,0x49474c49,0x48464b48,0x47464a47,0x47464a47,0x48464b48,0x49474c49,0x4a484e4a,0x4c49504c,0x4e4b534e,0x504d5650,0x534f5953,0x56515e56,0x59546259,0x5d57665d,0x615a6c61,0x665f7166,0x6b63776b,0x71687e71,0x756c8275,
	0x756c8375,0x71687d71,0x6b63766b,0x655e7065,0x605a6a60,0x5c56655c,0x58536058,0x55515c55,0x524f5852,0x504c5550,0x4d4a514d,0x4b484e4b,0x49474c49,0x47464947,0x46454846,0x46444746,0x46444746,0x46444846,0x47454947,0x48464b48,0x4a484d4a,0x4c49504c,0x4f4b544f,0x514d5751,0x54505b54,0x58526058,0x5b56645b,0x5f59695f,0x645d6f64,0x69627569,0x6f677c6f,0x746a8174,
	0x736b8273,0x6f677c6f,0x69617469,0x635d6e63,0x5f59695f,0x5a55635a,0x57525e57,0x53505a53,0x514e5651,0x4e4b534e,0x4b494f4b,0x49474c49,0x47454947,0x46444746,0x45434645,0x44434544,0x44434544,0x44434644,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4d4a514d,0x504c5550,0x534f5953,0x56525e56,0x5a55635a,0x5e58685e,0x635c6d63,0x68607368,0x6e657a6e,0x72698072,
	0x726a8072,0x6e667a6e,0x68607368,0x625c6d62,0x5e58675e,0x59546259,0x56515d56,0x524f5852,0x504c5550,0x4d4a514d,0x4a484d4a,0x47464a47,0x46444746,0x44434644,0x43424443,0x43424443,0x43424443,0x43424543,0x44434644,0x45444745,0x47454a47,0x49474c49,0x4b49504b,0x4e4b534e,0x524e5852,0x55505c55,0x59546159,0x5d57675d,0x625b6c62,0x675f7267,0x6c64796c,0x71687f71,
	0x71697f71,0x6d65796d,0x675f7267,0x615b6c61,0x5c57665c,0x58536158,0x55505b55,0x514e5751,0x4e4c534e,0x4c4a4f4c,0x49474b49,0x46454846,0x45444645,0x43424443,0x42424342,0x42414242,0x42414242,0x42424342,0x43424443,0x44434644,0x46454846,0x48464b48,0x4a484e4a,0x4d4a524d,0x514d5651,0x54505b54,0x58536058,0x5c56655c,0x615a6b61,0x665e7166,0x6b63786b,0x70677d70,
	0x70687e70,0x6b64796b,0x665f7166,0x615a6b61,0x5c56655c,0x58535f58,0x54505b54,0x504d5650,0x4d4b524d,0x4a494e4a,0x48464a48,0x45444745,0x44434544,0x42424342,0x41414241,0x41414141,0x41414141,0x42414242,0x42424342,0x43434543,0x45444745,0x47454a47,0x49484d49,0x4c4a514c,0x504d5550,0x534f5a53,0x57525f57,0x5b55655b,0x60596a60,0x655d7065,0x6b62776b,0x6f667c6f,
	0x6f677e6f,0x6b64786b,0x655e7165,0x605a6a60,0x5b56645b,0x57525f57,0x534f5a53,0x504c5550,0x4d4a514d,0x4a484d4a,0x47464947,0x45444645,0x43424443,0x42414242,0x41414141,0x40404140,0x41414141,0x41414141,0x42414242,0x43424443,0x45444645,0x46454946,0x49474c49,0x4c49504c,0x4f4c554f,0x534f5953,0x56525f56,0x5b55645b,0x5f59695f,0x645d7064,0x6a61766a,0x6e657c6e,
	0x6f677d6f,0x6b63776b,0x655e7165,0x60596a60,0x5b55645b,0x57525e57,0x534f5953,0x504c5450,0x4c4a504c,0x4a484d4a,0x47454947,0x45444645,0x43424343,0x41414241,0x41404141,0x40404040,0x40404040,0x41414141,0x41414241,0x42424342,0x44434644,0x46454846,0x48464c48,0x4b49504b,0x4f4b544f,0x534e5953,0x56515e56,0x5b55635b,0x5f59695f,0x645d6f64,0x69617669,0x6e657c6e,
	0x6f667e6f,0x6b63776b,0x655e7065,0x60596a60,0x5b55645b,0x56525e56,0x534f5953,0x4f4c544f,0x4c4a504c,0x49484c49,0x46454946,0x44444644,0x43424343,0x41414241,0x40404040,0x40404040,0x40404040,0x40404140,0x41414241,0x42424342,0x44434544,0x46444846,0x48464b48,0x4b494f4b,0x4f4b544f,0x524e5952,0x56515e56,0x5a55635a,0x5f58695f,0x645c6f64,0x69617669,0x6d657b6d,
	0x6f677d6f,0x6b63776b,0x655e7065,0x60596a60,0x5b55645b,0x57525e57,0x534f5953,0x4f4c554f,0x4c4a504c,0x49484d49,0x46454946,0x44444644,0x43424343,0x41414241,0x40414140,0x40404040,0x40404040,0x41414141,0x41414241,0x42424342,0x44434644,0x46454846,0x48464c48,0x4b49504b,0x4f4c544f,0x524e5952,0x56515e56,0x5a54645a,0x5f58695f,0x645d6f64,0x69617669,0x6e657b6e,
	0x70677d70,0x6b64786b,0x655e7165,0x605a6a60,0x5b56645b,0x57525f57,0x534f5953,0x504d5550,0x4c4a514c,0x4a484d4a,0x47464947,0x45444645,0x43434443,0x42414242,0x41414141,0x40404040,0x40404140,0x41414141,0x41414241,0x43424443,0x44434644,0x46454846,0x49474c49,0x4c49504c,0x4f4c554f,0x534f5a53,0x56525f56,0x5b55645b,0x5f596a5f,0x645d6f64,0x6a62766a,0x6d657c6d,
	0x70687e70,0x6c64796c,0x665f7266,0x605a6b60,0x5c56655c,0x57536057,0x54505a54,0x504d5650,0x4d4a514d,0x4a494e4a,0x47464a47,0x45444745,0x43434543,0x42424342,0x41414241,0x41414141,0x41404141,0x41414241,0x42414342,0x43424543,0x45444745,0x47454a47,0x49474d49,0x4c4a514c,0x504c5650,0x534f5a53,0x57525f57,0x5b56655b,0x60596a60,0x645d7064,0x6a62776a,0x6f667c6f,
	0x71697f71,0x6d65796d,0x67607267,0x615b6c61,0x5d57665d,0x58536158,0x54505c54,0x514e5751,0x4e4b534e,0x4b494f4b,0x48474b48,0x46454846,0x44444644,0x43424443,0x42424342,0x42414242,0x42414242,0x42414342,0x43424443,0x44434544,0x46444846,0x48464b48,0x4a484e4a,0x4d4a524d,0x514d5651,0x54505b54,0x58526058,0x5c56655c,0x615a6b61,0x655e7165,0x6b63786b,0x6f677e6f,
	0x736a8073,0x6e667b6e,0x68617368,0x625c6d62,0x5e58675e,0x59546259,0x55515d55,0x524f5852,0x4f4c544f,0x4c4a504c,0x4a484d4a,0x47464a47,0x45444845,0x44434644,0x43434443,0x43424443,0x43424443,0x43424443,0x44434544,0x45444745,0x47454947,0x49474c49,0x4b49504b,0x4e4b544e,0x514e5851,0x55505d55,0x59536259,0x5d57675d,0x615a6c61,0x665f7366,0x6c64796c,0x71687f71,
	0x746b8274,0x6f677d6f,0x69627569,0x645d6f64,0x5f59695f,0x5a55635a,0x57525e57,0x534f5a53,0x504d5650,0x4d4b524d,0x4b494f4b,0x48474b48,0x46454946,0x45444745,0x44444644,0x44434644,0x44434544,0x44434644,0x45444745,0x46454946,0x48464b48,0x4a484e4a,0x4d4a514d,0x4f4c554f,0x534f5a53,0x56515e56,0x5a54635a,0x5e58685e,0x625b6e62,0x68607468,0x6d657b6d,0x72698072,
	0x766c8476,0x71697e71,0x6b64776b,0x655e7165,0x605a6a60,0x5c56655c,0x58536058,0x55515c55,0x514e5751,0x4f4c544f,0x4c4a504c,0x4a484e4a,0x48474b48,0x47454a47,0x46454846,0x46444746,0x45444745,0x46444846,0x47454947,0x48464b48,0x4a484d4a,0x4c49504c,0x4e4b534e,0x514d5751,0x54505c54,0x57526057,0x5b55645b,0x5f586a5f,0x645c7064,0x69617569,0x6f667c6f,0x736a8273,
	0x776e8577,0x736b8073,0x6d65796d,0x67607267,0x625c6c62,0x5d58675d,0x59556259,0x56525e56,0x534f5a53,0x514d5651,0x4e4b534e,0x4c49504c,0x4a484e4a,0x49474c49,0x48464b48,0x47464a47,0x47464a47,0x48464a48,0x49474c49,0x4a484d4a,0x4b49504b,0x4d4b534d,0x504c5650,0x534e5953,0x55515d55,0x59536259,0x5c56665c,0x615a6c61,0x655e7165,0x6b63786b,0x71687e71,0x756c8375,
	0x79708879,0x756c8375,0x6e677c6e,0x69627569,0x645d6f64,0x5f59695f,0x5b56645b,0x58536058,0x55515c55,0x524f5952,0x504d5650,0x4e4b534e,0x4c4a504c,0x4b494f4b,0x4a484e4a,0x49474d49,0x49484d49,0x4a484d4a,0x4a484f4a,0x4c4a504c,0x4d4b524d,0x504c5550,0x524e5852,0x54505b54,0x57526057,0x5a55645a,0x5e58685e,0x635b6e63,0x68607468,0x6d657a6d,0x73698073,0x776d8577,
	0x7b728a7b,0x776e8577,0x71697e71,0x6b64776b,0x665f7166,0x615b6c61,0x5d58675d,0x5a55635a,0x57525f57,0x54505c54,0x524e5852,0x504d5550,0x4e4b534e,0x4d4a514d,0x4c4a504c,0x4b49504b,0x4b49504b,0x4c4a504c,0x4d4a514d,0x4e4b534e,0x4f4c554f,0x514e5851,0x534f5b53,0x56515e56,0x59546259,0x5c56665c,0x61596b61,0x655d7065,0x6a62766a,0x6f677d6f,0x746c8274,0x786f8778,
	0x7e748d7e,0x7a71887a,0x746c8174,0x6e667a6e,0x69617469,0x645d6f64,0x605a6a60,0x5c57665c,0x59546259,0x57525e57,0x54505b54,0x524e5852,0x514d5651,0x4f4c554f,0x4e4b544e,0x4e4b534e,0x4e4b534e,0x4e4b534e,0x4f4c544f,0x504d5650,0x524e5852,0x534f5b53,0x56515e56,0x58536158,0x5b55655b,0x5f58695f,0x635b6e63,0x675f7367,0x6c63796c,0x72687f72,0x776d8677,0x7b718a7b,
	0x80778f80,0x7c748a7c,0x776e8477,0x71697e71,0x6b64786b,0x66607266,0x625c6d62,0x5f59695f,0x5b56655b,0x59546159,0x57525e57,0x55505c55,0x534f5a53,0x524e5852,0x514d5751,0x514d5751,0x504d5750,0x514d5751,0x524e5852,0x534f5953,0x54505c54,0x56515e56,0x58536158,0x5a55645a,0x5e58685e,0x615a6c61,0x655e7165,0x6a62776a,0x6f667c6f,0x746b8274,0x7a70887a,0x7d738c7d,
	0x837a9383,0x7f768e7f,0x7a71877a,0x746c8174,0x6e667b6e,0x69627669,0x655f7165,0x615b6c61,0x5f58685f,0x5c56655c,0x59546259,0x57525f57,0x56515d56,0x55505c55,0x54505b54,0x534f5a53,0x534f5a53,0x54505b54,0x55505c55,0x55505d55,0x57525f57,0x58536158,0x5a55645a,0x5d57675d,0x615a6b61,0x645d7064,0x68607468,0x6d647a6d,0x72698072,0x776d8577,0x7c728b7c,0x7f758f7f,
	0x877d9687,0x82799182,0x7d738a7d,0x776e8477,0x716a7f71,0x6c65796c,0x68617468,0x645d7064,0x625b6c62,0x5f58695f,0x5c56655c,0x5a55635a,0x59536159,0x57526057,0x56525f56,0x56515e56,0x56515e56,0x56515f56,0x57526057,0x58536158,0x5a54635a,0x5b56655b,0x5d57685d,0x60596b60,0x635c6f63,0x675f7367,0x6c63796c,0x70677e70,0x756c8375,0x7a70887a,0x7e748d7e,0x81779281,
	0x89809a89,0x847b9484,0x7e768e7e,0x79718879,0x746c8274,0x6e687d6e,0x6a63786a,0x66607366,0x645d7064,0x605a6c60,0x5e58695e,0x5c56665c,0x5b55645b,0x5a54635a,0x59546259,0x59536159,0x58536158,0x59536259,0x59546259,0x5a54645a,0x5c56665c,0x5e57685e,0x60596b60,0x625b6e62,0x665e7266,0x6a62776a,0x6e657c6e,0x73698073,0x776e8577,0x7c728b7c,0x80768f80,0x82789382
};
#endif
void isp_top_init(xml_top_t *top,unsigned int w,unsigned int h)
{
#if 0
	unsigned short offset[XML_TOP]={
		0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0xaf
	};
	int i = 0;
	if(top){
		for(i=0;i < XML_TOP;i++)
                WR(ISP_VCBUS_BASE+offset[i],top->reg_map[i]);
	}
#endif
	/*config input size*/
	WR(ISP_HV_SIZE,w<<REG_HSIZE_BIT|h);
        WR(ISP_HBLANK,w<<REG_TOTAL_W_BIT|10);
	/*config output timming*/
	WR(ISP_OUTHS_PARA,0x100000a);
	return;
}
/*
*reg 0x08~0x1b
*/
void isp_set_test_pattern(xml_tp_t *tp)
{
	int i = 0;
	if(tp){
		for(i=0;i<XML_TP;i++)
			WR(ISP_PAT_GEN_CTRL+i,tp->reg_map[i]);
	}
	return;
}
/*
*reg 0x20~0x25
*/
void isp_set_clamp_gain(xml_cg_t *cg)
{
	int i = 0;
	if(cg){
		for(i=0;i<XML_CG;i++)
		        WR(ISP_CLAMPGAIN_CTRL+i, cg->reg_map[i]);
	}
	return;
}
/*
*reg 0x28~0x2c
*/
void isp_set_lens_shading(xml_ls_t *lens)
{
	int i = 0;
	if(lens){
		for(i=0;i<XML_LS;i++)
		        WR(ISP_LNS_CTRL+i, lens->reg_map[i]);
	}
}
/*
*reg 0x30
*/
void isp_set_gamma_correction(xml_gc_t *gc)
{
	int i = 0;
	if(gc){
		for(i=0;i<XML_GC;i++)
		        WR(ISP_GMR0_CTRL+i, gc->reg_map[i]);
	}
}
/*
*reg 0x31
*reg 0x33~0x3c
*/
void isp_set_defect_pixel_correction(xml_dp_t *dpc)
{
	int i = 0;
	unsigned short offset[XML_DP]={
		0x31,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3a,0x3b,0x3c
	};
	if(dpc){
		for(i=0;i<XML_DP;i++)
		        WR(ISP_VCBUS_BASE+offset[i], dpc->reg_map[i]);
	}
}
/*
*reg 0x40~0x41
*/
void isp_set_demosaicing(xml_dm_t *dms)
{
	int i = 0;
	if(dms){
		for(i=0;i<XML_DM;i++)
		        WR(ISP_DMS_CTRL0+i, dms->reg_map[i]);
	}
}
/*
*reg 0x42~0x4a
*/
void isp_set_matrix(xml_csc_t *csc, unsigned int height)
{
	unsigned int isp_matrix_lup[3][9]=
	{
		{0x0,0x10000,0x840102,0x3203b4,0x36b00e1,0xe10344,0x3dc,0x400200,0x200},
		//rgb->601
		{0x0,0x10000,0x5e013a,0x2003cc,0x35300e1,0xe10334,0x3ec,0x400200,0x200},
		//rgb->709
		{0x0,0x0000,0x01000000,0x00000,0x01000000,0x00000,0x100,0x000000,0x000},
	};
	unsigned int i=0, *start;
	if(csc){
		start = &(csc->reg_map[0]);
		if(height > 720)
			start = &(csc->reg_map[XML_CSC]);
		for(i=0;i<XML_CSC;i++)
		        WR(ISP_MATRIX_PRE_OFST0_1+i, *(start+i));
	} else {
	        if(height==0) {
	    	        start = isp_matrix_lup[2];
			for(i=0;i<XML_CSC;i++)
			        WR(ISP_MATRIX_PRE_OFST0_1+i, *(start+i));
	        }else{
		        start = (height>720)?isp_matrix_lup[1]:isp_matrix_lup[0];
		        for(i=0;i<XML_CSC;i++)
		                WR(ISP_MATRIX_PRE_OFST0_1+i, *(start+i));
		}
	}
}
/*
*reg 0x50
*reg 0x52 0x53 0x54 0x55 0x56 0x57 0x58 0x59 0x5a 0x5b
*reg 0x60 0x61 0x62 0x63 0x64 0x65 0x66
*reg 0x72 0x73 0x74 0x75 0x76 0x78 0x79 0x7a 0x7b
*reg 0x80 0x81 0x82 0x83 0x84 0x85(special effect )
*/
void isp_set_sharpness(xml_sharp_t *sharp)
{
	int i=0;
	unsigned short offset[XML_SH]={
		0x50,0x52,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x5a,0x5b,
		0x60,0x61,0x62,0x63,0x64,0x65,0x66,0x72,0x73,0x74,0x75,
		0x76,0x78,0x79,0x7a,0x7b,0x80,0x81,0x82,0x83,0x84,0x85
	};
	if(sharp){
		for(i=0;i<XML_SH;i++)
			WR(ISP_VCBUS_BASE+offset[i], sharp->reg_map[i]);
	}
}
/*
*reg 0x50~0x51
*reg 0x68~0x71
*reg 0x85
*/
void isp_set_nr(xml_nr_t *nr)
{
	int i = 0;
	unsigned short offset[XML_NR]={
		0x50,0x51,0x68,0x69,0x6a,0x6b,0x6c,
		0x6d,0x6e,0x6f,0x70,0x71,0x85
	};
	if(nr){
		for(i=0;i<XML_NR;i++)
			WR(ISP_VCBUS_BASE+offset[i], nr->reg_map[i]);
	}
}
/*
*reg 0x88~0x8c
*/
void isp_set_awb_stat(xml_awb_t *awbs,unsigned int w,unsigned int h)
{
	int i = 0;
	if(awbs){
		for(i=0;i<XML_AWB;i++)
			WR(ISP_AWB_WIND_LR+i, awbs->reg_map[i]);
	}
	/*config awb statistics window*/
	WR(ISP_AWB_WIND_LR,w);
	WR(ISP_AWB_WIND_TB,h);
}
/*
*reg 0x8c
*reg 0x90~0x94
*/
void isp_set_ae_stat(xml_ae_t *aes,unsigned int w,unsigned int h)
{
	unsigned int i=0,xstep=0,ystep=0;
	unsigned short offset[XML_AE]={
		0x8c,0x90,0x91,0x92,0x93,0x94
	};
	if(aes){
		for(i=0;i<XML_AE;i++)
			WR(ISP_VCBUS_BASE+offset[i],aes->reg_map[i]);
	}
	/*config ae statistics window*/
	xstep = w>>2;
	ystep = h>>2;

	WR(ISP_AEC_WIND_XYSTART,0);
	WR(ISP_AEC_WIND_XYSTEP,xstep<<13|ystep);
	WR(ISP_AECRAW_WIND_LR,w);
	WR(ISP_AECRAW_WIND_TB,h);
}
/*
*reg 0x98~0xa8
*/
void isp_set_af_stat(xml_af_t *afs,unsigned int w,unsigned int h)
{
	unsigned int i=0,tmp_w=0,tmp_h=0;
	if(afs){
		for(i=0;i<XML_AF;i++)
			WR(ISP_AFC_FILTER_SEL+i, afs->reg_map[i]);
	}
	WR(ISP_AFC_FILTER_SEL,0x17722);
    /*config win0~win8 according to hv size*/
	tmp_w = w/12;
	tmp_h = h/12;
	/* wind0 h:2-5  v:2-5*/
	WR(ISP_AFC_WIND0_LR,(tmp_w<<1)<<16|tmp_w*5);
	WR(ISP_AFC_WIND0_TB,(tmp_h<<1)<<16|tmp_h*5);
	/* wind1 h:5-8  v:5-8*/
	WR(ISP_AFC_WIND1_LR,(tmp_w*5)<<16|tmp_w<<3);
	WR(ISP_AFC_WIND1_TB,(tmp_h*5)<<16|tmp_h<<3);
	/* wind2 h:8-11 v:2-5*/
	WR(ISP_AFC_WIND2_LR,(tmp_w<<3)<<16|tmp_w*11);
	WR(ISP_AFC_WIND2_TB,(tmp_h<<1)<<16|tmp_h*5);
	/* wind3 h:2-5  v:8-11*/
	WR(ISP_AFC_WIND3_LR,(tmp_w<<1)<<16|tmp_w*5);
	WR(ISP_AFC_WIND3_TB,(tmp_h<<3)<<16|tmp_h*11);
	/*wind4 h:8-11 v:8-11*/
	WR(ISP_AFC_WIND4_LR,(tmp_w<<3)<<16|tmp_w*11);
	WR(ISP_AFC_WIND4_TB,(tmp_h<<3)<<16|tmp_h*11);
}
void isp_set_af_scan_stat(unsigned int x0,unsigned int y0,unsigned int x1,unsigned int y1)
{
	WR(ISP_AFC_WIND0_LR,x1|x0<<16);
	WR(ISP_AFC_WIND0_TB,y1|y0<<16);
	//WR(ISP_AFC_FILTER_SEL,0x000170f0);
	WR_BITS(ISP_AFC_FILTER_SEL,af_limit,AFC_F1_CORING_BIT,AFC_F1_CORING_WID);
	WR_BITS(ISP_AFC_FILTER_SEL,af_limit,AFC_F0_CORING_BIT,AFC_F0_CORING_WID);
	WR_BITS(ISP_AFC_FILTER_SEL,af_filter1,AFC_F1_SELECT_BIT,AFC_F1_SELECT_WID);
	WR_BITS(ISP_AFC_FILTER_SEL,af_filter0,AFC_F0_SELECT_BIT,AFC_F0_SELECT_WID);
	WR_BITS(ISP_AFC_FILTER_SEL,1,AFC_RO_UPDATE_BIT,AFC_RO_UPDATE_WID);
}
/*
*reg 0xac~0xae
*/
void isp_set_blenr_stat(unsigned int x0,unsigned int y0,unsigned int x1,unsigned int y1)
{
	#if 0
	int i = 0;
	pr_info("[%s..]%s: init ok.\n",DEVICE_NAME,__func__);
	if(blenrs){
		for(i=0;i<XML_BN;i++)
			WR(ISP_BLNR_CTRL+i, blenrs->reg_map[i]);
	}
	#endif
	/*set lpf according to sd or hd*/
	WR_BITS(ISP_BLNR_CTRL,0,BLNR_STATISTICS_EN_BIT,BLNR_STATISTICS_EN_WID);
	if(abs(y1-y0) > 720)
		WR_BITS(ISP_BLNR_CTRL,3,BLNR_LPF_MODE_BIT,BLNR_LPF_MODE_WID);
	else
		WR_BITS(ISP_BLNR_CTRL,1,BLNR_LPF_MODE_BIT,BLNR_LPF_MODE_WID);
	/*set ac adaptive*/
	WR_BITS(ISP_BLNR_CTRL,1,BLNR_AC_ADAPTIVE_BIT,BLNR_AC_ADAPTIVE_WID);
	WR(ISP_BLNR_WIND_LR, x1|x0<<16);
	WR(ISP_BLNR_WIND_TB, y1|y0<<16);
	WR_BITS(ISP_BLNR_CTRL,1,BLNR_STATISTICS_EN_BIT,BLNR_STATISTICS_EN_WID);
}
/*
*reg 0xb0~0xb1
*/
void isp_set_dbg(xml_dbg_t *dbg)
{
	int i = 0;
	pr_info("[%s..]%s: init ok.\n",DEVICE_NAME,__func__);
	if(dbg){
		for(i=0;i<XML_DBG;i++)
			WR(ISP_DBG_PIXEL_CTRL+i, dbg->reg_map[i]);
	}
}
static void isp_set_lnsd(xml_lut_ls_t *lnsd)
{
	int i = 0;
	if(lnsd){
		pr_info("%s\n",__func__);
		WRITE_VCBUS_REG(0x2d28, (READ_VCBUS_REG(0x2d28)&0xefffffff)); // disable lens shielding
		WRITE_VCBUS_REG(0x2daf, 0x0000000c);         // lens shielding lut ram: v-bus write mode
		WRITE_VCBUS_REG(ISP_LNS_XYSCAL, lnsd->reg_map[i]);
		for(i=1;i<XML_LUT_LS;i++){
			WR(ISP_LNSD_LUT_ADDR,i-1);
			WR(ISP_LNSD_LUT_DATA,lnsd->reg_map[i]);
		}
	    WRITE_VCBUS_REG(0x2daf, 0x00000000); // lens shielding lut ram: hardware read mode
	    WRITE_VCBUS_REG(0x2d28, (READ_VCBUS_REG(0x2d28)|0x10000000));
	}
}

#if 0
static void isp_set_lnsd_test(unsigned int w,unsigned int h)
{
	int i;
	pr_info("%s:w=%d,h=%d\n",__func__,w,h);
    WRITE_VCBUS_REG(0x2d28, (READ_VCBUS_REG(0x2d28)&0xefffffff)); // disable lens shielding
    WRITE_VCBUS_REG(0x2daf, 0x0000000c);         // lens shielding lut ram: v-bus write mode
    if((w==640)&&(h==480))
    {
		pr_info("480p\n");
	    WRITE_VCBUS_REG(0x2d29, 0x018D0212);      // lens shielding xscale & yscale
	    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
	    for (i = 0; i < 1024; i++)
	    {
			WRITE_VCBUS_REG(0x2dc7, isp_param_lns_lut_480p[i]);
	    }
    }
	else if((w==1280)&&(h==720))
    {
		pr_info("720p\n");
	    WRITE_VCBUS_REG(0x2d29, 0x00C60161);      // lens shielding xscale & yscale
	    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
	    for (i = 0; i < 1024; i++)
	    {
			WRITE_VCBUS_REG(0x2dc7, isp_param_lns_lut_720p[i]);
	    }
    }
	else if((w==1280)&&(h==960))
    {
		pr_info("960p\n");
	    WRITE_VCBUS_REG(0x2d29, 0x00C60108);      // lens shielding xscale & yscale
	    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
	    for (i = 0; i < 1024; i++)
	    {
			WRITE_VCBUS_REG(0x2dc7, isp_param_lns_lut_960p[i]);
	    }
    }
	else if((w==1920)&&(h==1080))
    {
		pr_info("1080p\n");
	    WRITE_VCBUS_REG(0x2d29, 0x008400EB);      // lens shielding xscale & yscale
	    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
	    for (i = 0; i < 1024; i++)
	    {
			WRITE_VCBUS_REG(0x2dc7, isp_param_lns_lut_1080p[i]);
	    }
    }
	else if((w==2592)&&(h==1944))
    {
		pr_info("5m\n");
	    WRITE_VCBUS_REG(0x2d29, 0x00620082);      // lens shielding xscale & yscale
	    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
	    for (i = 0; i < 1024; i++)
	    {
			WRITE_VCBUS_REG(0x2dc7, isp_param_lns_lut_5m[i]);
	    }
    }
    WRITE_VCBUS_REG(0x2daf, 0x00000000); // lens shielding lut ram: hardware read mode
    WRITE_VCBUS_REG(0x2d28, (READ_VCBUS_REG(0x2d28)|0x10000000));
}
#endif

void isp_set_lnsd_mode(unsigned int mode)
{
	WR_BITS(ISP_LNS_CTRL,mode,LNS_MESH_MODE_BIT,LNS_MESH_MODE_WID);
}
static void isp_set_gamma_table(struct xml_lut_gc_s *gt)
{
	if(gt){
		set_isp_gamma_table(gt->gamma_r,GAMMA_R);
		set_isp_gamma_table(gt->gamma_g,GAMMA_G);
		set_isp_gamma_table(gt->gamma_b,GAMMA_B);
	}else{
		pr_info("%s:null pointer error.\n",__func__);
	}
}
/*
*disable gamma correction & lnsd
*/
void disable_gc_lns_pk(bool flag)
{
	if(flag){
		WR_BITS(ISP_LNS_CTRL,1,LNS_CMOP_ENABLE_BIT,LNS_CMOP_ENABLE_WID);
		WR_BITS(ISP_GMR0_CTRL,1,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
		WR_BITS(ISP_PKNR_ENABLE,1,ISP_PK_EN_BIT,ISP_PK_EN_WID);
	}else{
		WR_BITS(ISP_LNS_CTRL,0,LNS_CMOP_ENABLE_BIT,LNS_CMOP_ENABLE_WID);
		WR_BITS(ISP_GMR0_CTRL,0,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
		WR_BITS(ISP_PKNR_ENABLE,0,ISP_PK_EN_BIT,ISP_PK_EN_WID);
	}
}

void isp_bypass_all()
{
	isp_bypass_for_rgb();
	WR_BITS(ISP_DMS_CTRL0,7,ISP_DMS_BYPASS_BIT,ISP_DMS_BYPASS_WID);
}

void isp_bypass_for_rgb()
{
	WR_BITS(ISP_PAT_GEN_CTRL,0,ISP_PAT_ENABLE_BIT,ISP_PAT_ENABLE_WID);
	WR_BITS(ISP_CLAMP_GRBG01,0,CLAMP_GRBG0_BIT,CLAMP_GRBG0_WID);
	WR_BITS(ISP_CLAMP_GRBG01,0,CLAMP_GRBG1_BIT,CLAMP_GRBG1_WID);
	WR_BITS(ISP_CLAMP_GRBG23,0,CLAMP_GRBG2_BIT,CLAMP_GRBG2_WID);
	WR_BITS(ISP_CLAMP_GRBG23,0,CLAMP_GRBG3_BIT,CLAMP_GRBG3_WID);
	WR_BITS(ISP_GAIN_GRBG01,0x100,GAIN_GRBG0_BIT,GAIN_GRBG0_WID);
	WR_BITS(ISP_GAIN_GRBG01,0x100,GAIN_GRBG1_BIT,GAIN_GRBG1_WID);
	WR_BITS(ISP_GAIN_GRBG23,0x100,GAIN_GRBG2_BIT,GAIN_GRBG2_WID);
	WR_BITS(ISP_GAIN_GRBG23,0x100,GAIN_GRBG3_BIT,GAIN_GRBG3_WID);
	WR_BITS(ISP_LNS_CTRL,0,LNS_CMOP_ENABLE_BIT,LNS_CMOP_ENABLE_WID);
	WR_BITS(ISP_GMR0_CTRL,0,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
	WR_BITS(ISP_DFT_CTRL,0,ISP_DFT_ENABLE_BIT,ISP_DFT_ENABLE_WID);
	isp_set_matrix(NULL,0);
	WR_BITS(ISP_PKNR_ENABLE,0,ISP_NR_EN_BIT,ISP_NR_EN_WID);
	WR_BITS(ISP_PKNR_ENABLE,0,ISP_PK_EN_BIT,ISP_PK_EN_WID);

}
static void isp_set_bayer_fmt(tvin_color_fmt_t bfmt)
{
	unsigned int tmp = bfmt - TVIN_BGGR;
	WR_BITS(ISP_PAT_GEN_CTRL,tmp,PAT_BAYER_FMT_BIT,PAT_BAYER_FMT_WID);
	WR_BITS(ISP_CLAMPGAIN_CTRL,tmp,CLP_BAYER_FMT_BIT,CLP_BAYER_FMT_WID);
	WR_BITS(ISP_LNS_CTRL,tmp,LNS_BAYER_FMT_BIT,LNS_BAYER_FMT_WID);
	WR_BITS(ISP_GMR0_CTRL,tmp,GMR_BAYER_FMT_BIT,GMR_BAYER_FMT_WID);
	WR_BITS(ISP_DFT_CTRL,tmp,DFT_BAYER_FMT_BIT,DFT_BAYER_FMT_WID);
	WR_BITS(ISP_DMS_CTRL0,tmp,DMS_BAYER_FMT_BIT,DMS_BAYER_FMT_BIT);
}
/*
*load isp config according to config file
*/
void isp_set_def_config(xml_default_regs_t *regs,tvin_port_t fe_port,tvin_color_fmt_t bfmt,unsigned int w,unsigned int h)
{
	unsigned int mux = 0;

	switch(fe_port){
		case TVIN_PORT_CAMERA:
			mux = 1;
			break;
		case TVIN_PORT_MIPI:
			mux = 2;
			break;
		default:
			mux = 0;
			break;
	}
	WR_BITS(VPU_MISC_CTRL,mux,ISP_IN_SEL_BIT,ISP_IN_SEL_WID);

	isp_top_init(&regs->top,w,h);
	isp_set_test_pattern(&regs->tp);
	isp_set_clamp_gain(&regs->cg);
	isp_set_lens_shading(&regs->ls);
	isp_set_gamma_correction(&regs->gc);
	isp_set_defect_pixel_correction(&regs->dp);
	isp_set_demosaicing(&regs->dm);
	isp_set_matrix(NULL,h);
	isp_set_sharpness(&regs->sharp);
	isp_set_nr(&regs->nr);
	isp_set_blenr_stat((w>>2),(h>>2),(w-(w>>2)),(h-(h>>2)));
	isp_set_awb_stat(&regs->awb_reg,w,h);
	isp_set_ae_stat(&regs->ae_reg,w,h);
	isp_set_af_stat(&regs->af_reg,w,h);
	//isp_set_dbg(&regs->dbg);
	isp_set_lnsd(&regs->lnsd);
	//isp_set_lnsd_test(w,h);
	isp_set_gamma_table(&regs->lut_gc);
	/*config bayer fmt*/
	if(TVIN_BGGR<=bfmt && bfmt<=TVIN_GRBG)
		isp_set_bayer_fmt(bfmt);
	//enable isp
	WR_BITS(ISP_FRM_SOFT_RST,0,0,1);
	WR_BITS(ISP_TIMING_MODE,0,5,1);
	pr_info("[%s..]%s: init ok(w:%d,h:%d) bayer fmt %s.\n",DEVICE_NAME,__func__,w,h,tvin_color_fmt_str(bfmt));
}

void isp_hw_enable(bool flag)
{
	if(flag){
		WR_BITS(ISP_FRM_SOFT_RST,0,0,1);
		WR_BITS(ISP_TIMING_MODE,0,5,1);
	}else{
		WR_BITS(ISP_TIMING_MODE,1,5,1);
		WR_BITS(ISP_FRM_SOFT_RST,1,0,1);
	}

}
/*
*just enable test pattern
*/
void isp_test_pattern(unsigned int hsize,unsigned int vsize,unsigned int htotal,unsigned int vtotal,unsigned char bayer_fmt)
{
        // pat gen
        WRITE_VCBUS_REG(ISP_PAT_GEN_CTRL, 0x0);
        WRITE_VCBUS_REG(ISP_PAT_XRAMP_SCAL,0x00ffffff);
        WRITE_VCBUS_REG(ISP_PAT_YRAMP_SCAL,0x00ffffff);
        WRITE_VCBUS_REG(ISP_PAT_XYIDX_OFST,0x0 );
        WRITE_VCBUS_REG(ISP_PAT_XYIDX_SCAL,0x0022003d); //default=0
        WRITE_VCBUS_REG(ISP_PAT_BAR16_RED0,0x0000ffff);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_RED1,0x0000ffff);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_RED2,0x80604020);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_RED3,0xffe0c0a0);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_GRN0,0x0000ffff); //defaulr is all 'hff
        WRITE_VCBUS_REG(ISP_PAT_BAR16_GRN1,0x00000000);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_GRN2,0x80604020);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_GRN3,0xffe0c0a0);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_BLU0,0x00ff00ff);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_BLU1,0x00ff00ff);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_BLU2,0x80604020);
        WRITE_VCBUS_REG(ISP_PAT_BAR16_BLU3,0xffe0c0a0);

        WRITE_VCBUS_REG_BITS(ISP_PAT_GEN_CTRL,  0 ,20,3); // xmode: raster/bar16/burst enable
        WRITE_VCBUS_REG_BITS(ISP_PAT_GEN_CTRL,  2 ,16,3); // ymode: 1023
	WRITE_VCBUS_REG_BITS(ISP_PAT_GEN_CTRL,bayer_fmt,PAT_BAYER_FMT_BIT,PAT_BAYER_FMT_WID);
        // pat dft
        WRITE_VCBUS_REG(ISP_PAT_DFT_XYIDX,0x006400c8 ); //reg_isp_pat_dft_xidx='h64,reg_isp_pat_dft_yidx='hc8
        WRITE_VCBUS_REG(ISP_PAT_DFT_XYWID,0x00010004 ); //default reg_isp_pat_dft_ywid=64,default is wrong?
        WRITE_VCBUS_REG(ISP_PAT_DFT_GAIN, 0x0);
        WRITE_VCBUS_REG(ISP_PAT_HVTOTAL,(vtotal<<16)|(htotal));
        WRITE_VCBUS_REG(ISP_PAT_VDE_SLINE,0x00000007 );
        // demosaicing
        WRITE_VCBUS_REG(ISP_DMS_CTRL0, 0x00030000);
        WRITE_VCBUS_REG(ISP_DMS_CTRL1, 0x00120510);
	WRITE_VCBUS_REG_BITS(ISP_DMS_CTRL0,bayer_fmt,DMS_BAYER_FMT_BIT,DMS_BAYER_FMT_WID);
        // color matrix
        isp_set_matrix(NULL,0);

        WRITE_VCBUS_REG(ISP_RST_DLY_NUM,htotal*6);
        WRITE_VCBUS_REG_BITS(ISP_PAT_GEN_CTRL,1,28,1);
}
/*
*just enable demosaicing,matrix
*/
void isp_load_def_setting(unsigned int w,unsigned int h,unsigned char bayer_fmt)
{
	//reset isp
	WR_BITS(ISP_TIMING_MODE,1,5,1);
	WR_BITS(ISP_FRM_SOFT_RST,1,0,1);
	//disable pattern generator
	WR_BITS(ISP_PAT_GEN_CTRL,0,ISP_PAT_ENABLE_BIT,ISP_PAT_ENABLE_WID);
	//disable gamma & lnsd
	disable_gc_lns_pk(false);
	//disable nr,pk
	WR_BITS(ISP_PKNR_ENABLE,0,ISP_NR_EN_BIT,ISP_NR_EN_WID);
	//disable defect pixel
	WR_BITS(ISP_DFT_CTRL,0,ISP_DFT_ENABLE_BIT,ISP_DFT_ENABLE_WID);
	WR_BITS(ISP_DFT_CTRL,0,DFTMAP_CORRECT_MODE_BIT,DFTMAP_CORRECT_MODE_WID);
	//disable clamp gain
	WR(ISP_CLAMPGAIN_CTRL,bayer_fmt<<24);
	WR(ISP_GAIN_BSCORE_GRBG,0x3000000);
	WR(ISP_CLAMP_GRBG01,0x0);
	WR(ISP_CLAMP_GRBG23,0x0);
	WR(ISP_GAIN_GRBG01, 0x1000100);
	WR(ISP_GAIN_GRBG23, 0x1000100);

	WR(ISP_HV_SIZE,w<<REG_HSIZE_BIT|h);
        WR(ISP_HBLANK, w<<REG_TOTAL_W_BIT|10);
	// demosaicing
        WR(ISP_DMS_CTRL0, bayer_fmt<<24);
        WR(ISP_DMS_CTRL1, 0x00120510);
	//matrix
	isp_set_matrix(NULL,h);
	//enable
	WR_BITS(ISP_FRM_SOFT_RST,0,0,1);
	WR_BITS(ISP_TIMING_MODE,0,5,1);

}

/*
*wave init
*/
void wave_init(wave_t *wave_param)
{
	static bool init_flag = false;
        if (!init_flag) {
    	        init_flag = true;
                // clock_div & clock disable
                WRITE_CBUS_REG(HHI_ISP_LED_CLK_CNTL, wave_param->wave_clock_div);
	        // disable isp_led2_en
	        WRITE_CBUS_REG_BITS(PERIPHS_PIN_MUX_9,0,17,1); // clear pinmux_9[17] for isp_led2_en
	        // enable isp_led1_en
	        WRITE_CBUS_REG_BITS(PERIPHS_PIN_MUX_5,0,31,1); // clear pinmux_5[31] for I2C_SDA_A
	        WRITE_CBUS_REG_BITS(PERIPHS_PIN_MUX_7,0,25,1); // clear pinmux_7[25] for PWM_VS
	        WRITE_CBUS_REG_BITS(PERIPHS_PIN_MUX_9,0,16,1); // clear pinmux_9[16] for PWM_A
	        WRITE_CBUS_REG_BITS(PERIPHS_PIN_MUX_9,1,18,1); // set pinmux_9[18] for isp_led1_en
        }
}

void flash_init(bool mode_pol_inv,bool led1_pol_inv,bool pin_mux_inv,wave_t *wave_param)
{
        wave_init(wave_param);
        // MODE pin
        //if (mode_pol_inv)
		//set_mode_low();
	//else
		//set_mode_high();
	// EN/SET pin
	WRITE_CBUS_REG(ISP_LED_CTRL, (led1_pol_inv<<29)|(pin_mux_inv<<27)|(1<<26)|(1<<24));
        WRITE_CBUS_REG(ISP_LED_TIMING1, 0);
        WRITE_CBUS_REG(ISP_LED_TIMING2, 0);
        WRITE_CBUS_REG(ISP_LED_TIMING3, wave_param->latch_time_timeout);
        WRITE_CBUS_REG(ISP_LED_TIMING4, wave_param->latch_time);
        WRITE_CBUS_REG(ISP_LED_TIMING5, 0);
        WRITE_CBUS_REG(ISP_LED_TIMING6, wave_param->time_to_latch);
}

void torch_init(bool mode_pol_inv,bool led1_pol_inv,bool pin_mux_inv,bool torch_pol_inv,wave_t *wave_param,unsigned int level)
{
        unsigned int pulse_qty = 0;

	wave_init(wave_param);
	// MODE pin
	//if (mode_pol_inv)
		//set_mode_high();
	//else
		//set_mode_low();
	// EN/SET pin
	pulse_qty = level*wave_param->pulse_qty_max/100;
	if (pulse_qty > wave_param->pulse_qty_max - 1)
		pulse_qty = wave_param->pulse_qty_max - 1;
	if (!torch_pol_inv)
		pulse_qty = wave_param->pulse_qty_max - 1 - pulse_qty;
	WRITE_CBUS_REG(ISP_LED_CTRL, (led1_pol_inv<<29)|(pin_mux_inv<<27)|(1<<26)|(pulse_qty<<12)|(wave_param->pulse_init_time<<0));
	WRITE_CBUS_REG(ISP_LED_TIMING1, 0);
	WRITE_CBUS_REG(ISP_LED_TIMING2, (wave_param->pulse_high_time<<21)|(wave_param->pulse_low_time<<10));
	WRITE_CBUS_REG(ISP_LED_TIMING3, 0);
	WRITE_CBUS_REG(ISP_LED_TIMING4, 0x03ffffff);
	WRITE_CBUS_REG(ISP_LED_TIMING5, (wave_param->time_to_off&0x0000003f)<<26);
	WRITE_CBUS_REG(ISP_LED_TIMING6, ((wave_param->time_to_off>>6)<<26)|wave_param->time_to_latch);
}

static void wave_on(bool enable)
{
	if(enable) {
        WRITE_CBUS_REG_BITS(ISP_LED_CTRL,1,31,1);
        WRITE_CBUS_REG_BITS(HHI_ISP_LED_CLK_CNTL,1,16,1);
    } else
		WRITE_CBUS_REG_BITS(ISP_LED_CTRL,0,31,1);
}

void flash_on(bool mode_pol_inv,bool led1_pol_inv,bool pin_mux_inv,wave_t *wave_param)
{
        wave_on(false);
	flash_init(mode_pol_inv,led1_pol_inv,pin_mux_inv,wave_param);
	wave_on(true);
}

void torch_level(bool mode_pol_inv,bool led1_pol_inv,bool pin_mux_inv,bool torch_pol_inv,wave_t *wave_param,unsigned int level)
{
        wave_on(false);
	// torch on
        if (level) {
	        torch_init(mode_pol_inv,led1_pol_inv,pin_mux_inv,torch_pol_inv,wave_param,level);
		wave_on(true);
	}
}


void wave_power_manage(bool enable)
{
	if(enable)
    	// clock enable
    	        WRITE_CBUS_REG_BITS(HHI_ISP_LED_CLK_CNTL,1,16,1);
	else
	// clock disable
    	        WRITE_CBUS_REG_BITS(HHI_ISP_LED_CLK_CNTL,0,16,1);
}

/*only adjust g0 r1 b2 g3*/
void isp_set_manual_wb(xml_wb_manual_t *wb)
{
	WR(ISP_GAIN_GRBG01,wb->reg_map[0]);
	WR(ISP_GAIN_GRBG23,wb->reg_map[1]);
}

void isp_wr(unsigned int addr,unsigned int data)
{
	WR(ISP_RO_ADDR_PORT,addr);
	WR(ISP_RO_DATA_PORT,data);
}

unsigned int isp_rd(unsigned int addr)
{
	WR(ISP_RO_ADDR_PORT,addr);
        return(RD(ISP_RO_DATA_PORT));
}
/*
*reg 0x00~0x1b
*/
void isp_get_awb_stat(isp_awb_stat_t *awb_stat)
{
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_RED_SUM);
	awb_stat->rgb.rgb_sum[0] = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_GRN_SUM);
	awb_stat->rgb.rgb_sum[1] = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_BLU_SUM);
	awb_stat->rgb.rgb_sum[2] = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_RGB_NUM);
	awb_stat->rgb.rgb_count = RD_BITS(ISP_RO_DATA_PORT,AWB_RGB_NUM_BIT,AWB_RGB_NUM_WID);

	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_UNEG_SUM);
	awb_stat->yuv_low[0].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_VNEG_SUM);
	awb_stat->yuv_low[1].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_UPOS_SUM);
	awb_stat->yuv_low[2].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_VPOS_SUM);
	awb_stat->yuv_low[3].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_UNEG_NUM);
	awb_stat->yuv_low[0].count = RD_BITS(ISP_RO_DATA_PORT,AWB_LOW_UNEG_NUM_BIT,AWB_LOW_UNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_VNEG_NUM);
	awb_stat->yuv_low[1].count = RD_BITS(ISP_RO_DATA_PORT,AWB_LOW_VNEG_NUM_BIT,AWB_LOW_VNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_UPOS_NUM);
	awb_stat->yuv_low[2].count = RD_BITS(ISP_RO_DATA_PORT,AWB_LOW_UPOS_NUM_BIT,AWB_LOW_UPOS_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_LOW_VPOS_NUM);
	awb_stat->yuv_low[3].count = RD_BITS(ISP_RO_DATA_PORT,AWB_LOW_VPOS_NUM_BIT,AWB_LOW_VPOS_NUM_WID);

	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_UNEG_SUM);
	awb_stat->yuv_mid[0].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_VNEG_SUM);
	awb_stat->yuv_mid[1].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_UPOS_SUM);
	awb_stat->yuv_mid[2].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_VPOS_SUM);
	awb_stat->yuv_mid[3].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_UNEG_NUM);
	awb_stat->yuv_mid[0].count = RD_BITS(ISP_RO_DATA_PORT,AWB_MID_UNEG_NUM_BIT,AWB_MID_UNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_VNEG_NUM);
	awb_stat->yuv_mid[1].count = RD_BITS(ISP_RO_DATA_PORT,AWB_MID_VNEG_NUM_BIT,AWB_MID_VNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_UPOS_NUM);
	awb_stat->yuv_mid[2].count = RD_BITS(ISP_RO_DATA_PORT,AWB_MID_UPOS_NUM_BIT,AWB_MID_UPOS_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_MID_VPOS_NUM);
	awb_stat->yuv_mid[3].count = RD_BITS(ISP_RO_DATA_PORT,AWB_MID_VPOS_NUM_BIT,AWB_MID_VPOS_NUM_WID);

	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_UNEG_SUM);
	awb_stat->yuv_high[0].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_VNEG_SUM);
	awb_stat->yuv_high[1].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_UPOS_SUM);
	awb_stat->yuv_high[2].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_VPOS_SUM);
	awb_stat->yuv_high[3].sum = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_UNEG_NUM);
	awb_stat->yuv_high[0].count = RD_BITS(ISP_RO_DATA_PORT,AWB_HIG_UNEG_NUM_BIT,AWB_HIG_UNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_VNEG_NUM);
	awb_stat->yuv_high[1].count = RD_BITS(ISP_RO_DATA_PORT,AWB_HIG_VNEG_NUM_BIT,AWB_HIG_VNEG_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_UPOS_NUM);
	awb_stat->yuv_high[2].count = RD_BITS(ISP_RO_DATA_PORT,AWB_HIG_UPOS_NUM_BIT,AWB_HIG_UPOS_NUM_WID);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AWB_HIG_VPOS_NUM);
	awb_stat->yuv_high[3].count = RD_BITS(ISP_RO_DATA_PORT,AWB_HIG_VPOS_NUM_BIT,AWB_HIG_VPOS_NUM_WID);

	return;
}
/*
*reg 0x1c~0x2e
*/
void isp_get_ae_stat(isp_ae_stat_t *ae_stat)
{
	int i = 0;
	/*0x1c~0x2b*/
	for(i=0;i<16;i++){
		WR(ISP_RO_ADDR_PORT, ISP_RO_AEC_LUMA_WIND0_0+i);
		ae_stat->luma_win[i] = RD(ISP_RO_DATA_PORT);
	}

	WR(ISP_RO_ADDR_PORT, ISP_RO_AECRAW_NUM_RED);
	ae_stat->bayer_over_info[0] = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AECRAW_NUM_GREEN);
	ae_stat->bayer_over_info[1] = RD(ISP_RO_DATA_PORT);
	WR(ISP_RO_ADDR_PORT, ISP_RO_AECRAW_NUM_BLUE);
	ae_stat->bayer_over_info[2] = RD(ISP_RO_DATA_PORT);

	return;
}

void isp_set_ae_win(unsigned int left, unsigned int right, unsigned int top, unsigned int bottom)
{
	WR_BITS(ISP_AECRAW_WIND_LR, left, AECRAW_WIND_LEFT_BIT, AECRAW_WIND_LEFT_WID);
	WR_BITS(ISP_AECRAW_WIND_LR, right, AECRAW_WIND_RIGHT_BIT, AECRAW_WIND_RIGHT_WID);
	WR_BITS(ISP_AECRAW_WIND_TB, top, AECRAW_WIND_TOP_BIT, AECRAW_WIND_TOP_WID);
	WR_BITS(ISP_AECRAW_WIND_TB, bottom, AECRAW_WIND_BOT_BIT, AECRAW_WIND_BOT_WID);

	WR_BITS(ISP_AEC_WIND_XYSTART, left, AEC_WIND_XSTART_BIT, AEC_WIND_XSTART_WID);
	WR_BITS(ISP_AEC_WIND_XYSTART, top, AEC_WIND_YSTART_BIT, AEC_WIND_YSTART_WID);
	WR_BITS(ISP_AEC_WIND_XYSTEP, (right-left+1)>>2, AEC_WIND_XSTEP_BIT, AEC_WIND_XSTEP_WID);
	WR_BITS(ISP_AEC_WIND_XYSTEP, (bottom-top+1)>>2, AEC_WIND_YSTEP_BIT, AEC_WIND_YSTEP_WID);
}

void isp_set_awb_win(unsigned int left, unsigned int right, unsigned int top, unsigned int bottom)
{
	WR_BITS(ISP_AWB_WIND_LR, left, AWB_WIND_LEFT_BIT, AWB_WIND_LEFT_BIT);
	WR_BITS(ISP_AWB_WIND_LR, right, AWB_WIND_RIGHT_BIT, AWB_WIND_RIGHT_WID);
	WR_BITS(ISP_AWB_WIND_TB, top, AWB_WIND_TOP_BIT, AWB_WIND_TOP_WID);
	WR_BITS(ISP_AWB_WIND_TB, bottom, AWB_WIND_BOT_BIT, AWB_WIND_BOT_WID);
}

void isp_set_ae_thrlpf(unsigned char thr_r, unsigned char thr_g, unsigned char thr_b, unsigned char lpf)
{
	WR_BITS(ISP_AEC_THRESHOLDS, thr_r, AEC_RAWBRIGHT_R_BIT, AEC_RAWBRIGHT_R_WID);
	WR_BITS(ISP_AEC_THRESHOLDS, thr_g, AEC_RAWBRIGHT_G_BIT, AEC_RAWBRIGHT_G_WID);
	WR_BITS(ISP_AEC_THRESHOLDS, thr_b, AEC_RAWBRIGHT_B_BIT, AEC_RAWBRIGHT_B_WID);
	WR_BITS(ISP_CLAMPGAIN_CTRL, lpf, AECRAW_LPF_SEL_BIT, AECRAW_LPF_SEL_WID);
}

void isp_set_awb_yuv_thr(unsigned char yh, unsigned char yl, unsigned char u, unsigned char v)
{
	WR_BITS(ISP_AWB_UVTH_YPIECE, yh, AWB_YPIECE_HIG_BIT, AWB_YPIECE_HIG_WID);
	WR_BITS(ISP_AWB_UVTH_YPIECE, yl, AWB_YPIECE_LOW_BIT, AWB_YPIECE_LOW_WID);
	WR_BITS(ISP_AWB_UVTH_YPIECE, u, AWB_U_THRD_BIT, AWB_U_THRD_WID);
	WR_BITS(ISP_AWB_UVTH_YPIECE, v, AWB_V_THRD_BIT, AWB_V_THRD_WID);
}

void isp_set_awb_rgb_thr(unsigned char gb, unsigned char gr, unsigned br)
{
	WR_BITS(ISP_AWB_GBGRBR_THRD, gb, AWB_GB_THRD_BIT, AWB_GB_THRD_WID);
	WR_BITS(ISP_AWB_GBGRBR_THRD, gr, AWB_GR_THRD_BIT, AWB_GR_THRD_WID);
	WR_BITS(ISP_AWB_GBGRBR_THRD, br, AWB_BR_THRD_BIT, AWB_BR_THRD_WID);
}

void isp_get_af_stat(isp_af_stat_t * af_stat)
{
	int i = 0;
	/*0xbc~0xc6*/
	if(IS_ERR_OR_NULL(af_stat)){
		pr_info("%s null pointer error.\n",__func__);
	} else {
	for(i=0;i<16;i++)
		af_stat->luma_win[i]=isp_rd(ISP_RO_AFC_WIND0_F0 + i);
	}
	return;
}
void isp_get_af_scan_stat(isp_blnr_stat_t *blnr_stat)
{
	int i = 0;
	for(i=0;i<16;i++){
		blnr_stat->af_ac[i] = isp_rd(ISP_RO_AFC_WIND0_F0 + i);
	}
}
void isp_get_blnr_stat(isp_blnr_stat_t *blnr_stat)
{
	int i = 0;

	for(i=0;i<4;i++){
		blnr_stat->dc[i] = isp_rd(ISP_RO_BLNR_GRBG_DCSUM0+i);
		blnr_stat->ac[i] = isp_rd(ISP_RO_BLNR_GRBG_ACSUM0+i);
	}

	return;
}

void isp_hw_reset()
{
	WR_BITS(ISP_TIMING_MODE,1,5,1);
	WR_BITS(ISP_FRM_SOFT_RST,1,0,1);
	WR_BITS(ISP_FRM_SOFT_RST,0,0,1);
	WR_BITS(ISP_FRM_SOFT_RST,1,0,1);
	WR_BITS(ISP_FRM_SOFT_RST,0,0,1);
	WR_BITS(ISP_TIMING_MODE,0,5,1);
}

void isp_awb_set_gain(unsigned int r,unsigned int g,unsigned int b)
{
	WR_BITS(ISP_GAIN_GRBG01, g, GAIN_GRBG0_BIT, GAIN_GRBG0_WID);
	WR_BITS(ISP_GAIN_GRBG01, r, GAIN_GRBG1_BIT, GAIN_GRBG1_WID);
	WR_BITS(ISP_GAIN_GRBG23, b, GAIN_GRBG2_BIT, GAIN_GRBG2_WID);
	WR_BITS(ISP_GAIN_GRBG23, g, GAIN_GRBG3_BIT, GAIN_GRBG3_WID);
}

void isp_awb_get_gain(isp_awb_gain_t *awb_gain)
{
	awb_gain->b_val = RD_BITS(ISP_GAIN_GRBG23, GAIN_GRBG2_BIT, GAIN_GRBG2_WID);
	awb_gain->r_val = RD_BITS(ISP_GAIN_GRBG01, GAIN_GRBG1_BIT, GAIN_GRBG1_WID);
	awb_gain->g_val = RD_BITS(ISP_GAIN_GRBG01, GAIN_GRBG0_BIT, GAIN_GRBG0_WID);
}

void set_isp_gamma_table(unsigned short *gamma,unsigned int type)
{
	unsigned int flag = 0,i = 0;

        // store gamma table enable/disable status
        flag = (RD_BITS(ISP_GMR0_CTRL,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID))|gamma_enable;

        // gamma table disable, gamma table vbus mode
        WR_BITS(ISP_GMR0_CTRL,0,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
	WR_BITS(ISP_GMR0_CTRL,1,GCLUT_ACCMODE_BIT,GCLUT_ACCMODE_WID);
        // point to gamma
        WR(ISP_GAMMA_LUT_ADDR, type);
        // write gamma
        for (i = 0; i < 257; i++) {
                WR(ISP_GAMMA_LUT_DATA, gamma[i]);
        }

        // retrieve gamma table enable/disable status, gamma table hardware mode
        WR_BITS(ISP_GMR0_CTRL, flag,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
	WR_BITS(ISP_GMR0_CTRL,0,GCLUT_ACCMODE_BIT,GCLUT_ACCMODE_WID);

}
void get_isp_gamma_table(unsigned short *gamma,unsigned int type)
{
	unsigned int flag = 0,i = 0;

        // store gamma table enable/disable status
        flag = RD_BITS(ISP_GMR0_CTRL,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);

        // gamma table disable, gamma table vbus mode
        WR_BITS(ISP_GMR0_CTRL,0,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
	WR_BITS(ISP_GMR0_CTRL,1,GCLUT_ACCMODE_BIT,GCLUT_ACCMODE_WID);
        // point to gamma
        WR(ISP_GAMMA_LUT_ADDR, type);
        // get gamma
        for (i = 0; i < 257; i++) {
                gamma[i] = RD(ISP_GAMMA_LUT_DATA);
        }

        // retrieve gamma table enable/disable status, gamma table hardware mode
        WR_BITS(ISP_GMR0_CTRL, flag,GMR_CORRECT_ENABLE_BIT,GMR_CORRECT_ENABLE_WID);
	WR_BITS(ISP_GMR0_CTRL,0,GCLUT_ACCMODE_BIT,GCLUT_ACCMODE_WID);
}

/*
* lens-shading debug start
*/
#if 0
static unsigned long long div64(unsigned long long n, unsigned long long d) // n for numerator, d for denominator
{
    unsigned int n_bits = 0, d_bits = 0, i = 0;
    unsigned long long q = 0, t = 0; // q for quotient, t for temporary
    // invalid
    if (!d) {
        q = 0xffffffffffffffff;
    }
    // (0.5, 0]
    else if (n + n < d) {
        q = 0;
    }
    // [1.0, 0.5]
    else if (n <= d) {
        q = 1;
    }
    // [max, 1.0)
    else
    {
        // get n_bits
        for (n_bits = 1; n_bits <= 64; n_bits++)
            if (!(n >> n_bits))
                break;
        if (n_bits > 64)
		n_bits = 64;
		// get d_bits
        for (d_bits = 1; d_bits <= 64; d_bits++)
            if (!(d >> d_bits))
                break;
        if (d_bits > 64)
            d_bits = 64;
        // check integer part
        for (i = n_bits; i >= d_bits; i--) {
            q <<= 1;
            t = d << (i - d_bits);
            if (n >= t)
            {
                n -= t;
                q += 1;
            }
        }
        // check fraction part
        if (n + n >= d)
            q += 1;
    }
    return q;
}

static unsigned int phase_curve_grid(unsigned int curvature, unsigned int gain_0db, unsigned int dx, unsigned int dy, unsigned int rradium)
{
    unsigned int data = 0;

    if (curvature > 100)
    {
        data = (unsigned int)div64((unsigned long long)gain_0db*(unsigned long long)(curvature - 100)*(unsigned long long)(dx*dx + dy*dy), (unsigned long long)rradium*(unsigned long long)100);
        data = gain_0db + data;
        if (data > 255)
        {
            data = 255;
        }
    }
    else if (curvature < 100)
    {
        data = (unsigned int)div64((unsigned long long)gain_0db*(unsigned long long)(100 - curvature)*(unsigned long long)(dx*dx + dy*dy), (unsigned long long)rradium*(unsigned long long)100);
        if (data > gain_0db)
        {
            data = 0;
        }
        else
        {
            data = gain_0db - data;
        }
    }
    else
    {
        data = gain_0db;
    }

    return(data);
}
#endif
#if 0//for no use
void isp_ls_curve(unsigned int psize_v2h,    // pixel_size_percentage_vertical_to_horizontal (default is 100), given 1.4um*1.4um, it is:
                                             // 100(%) for p2p format
                                             // 100(%) for skipping format
                                             // 100(%) for 2*2 binning format
                                             // 100(%) for 4*4 binning format
                                             //  50(%) for 2*1 binning format
                                             //  50(%) for 4*2 binning format
                  unsigned int hactive,      // given 1080p, this value is 1920, default is 1920
                  unsigned int vactive,      // given 1080p, this value is 1080, default is 1080
                  unsigned int ocenter_c2l,  // optical_center_percentage_center_to_left (default is 50), given centralized, this value is 50(%)
                  unsigned int ocenter_c2t,  // optical_center_percentage_center_to_top  (default is 50), given centralized, this value is 50(%)
                  unsigned int gain_0db,     // gain_0db (default is 0)
                                             // 0 for 128
                                             // 1 for 64
                                             // 2 for 32
                                             // 3 for 16
                  unsigned int curvature_gr, //   0: corner_gain = 0.0*gain_0db, minimum
                                             // 100: corner_gain = 1.0*gain_0db, default
                                             // 200: corner_gain = 2.0*gain_0db, maximum
                  unsigned int curvature_r,  //   0: corner_gain = 0.0*gain_0db, minimum
                                             // 100: corner_gain = 1.0*gain_0db, default
                                             // 200: corner_gain = 2.0*gain_0db, maximum
                  unsigned int curvature_b,  //   0: corner_gain = 0.0*gain_0db, minimum
                                             // 100: corner_gain = 1.0*gain_0db, default
                                             // 200: corner_gain = 2.0*gain_0db, maximum
                  unsigned int curvature_gb, //   0: corner_gain = 0.0*gain_0db, minimum
                                             // 100: corner_gain = 1.0*gain_0db, default
                                             // 200: corner_gain = 2.0*gain_0db, maximum
                  bool         force_enable  //   0: keep original disable/enable status
                                             //   1: force to enable lens shielding
                  )
{
    unsigned int haxis[32], vaxis[32], curve[32][32];
    unsigned int hmax = 0, vmax = 0, vcenter = 0, hcenter = 0, rradium = 0, xscale = 0, yscale = 0;
    unsigned int i = 0, j = 0, dx = 0, dy = 0, control = READ_VCBUS_REG(0x2d28);

    // validation
    if ((psize_v2h < 50) || (psize_v2h > 200))
    {
        psize_v2h = 100;
        pr_info(" pixel size too narrow!!!!! \n");
    }
#if 0
    if ((!hactive) || (!vactive))
    {
        hactive = 1920;
        vactive = 1080;
    }
#endif
    if ((!ocenter_c2l) || (ocenter_c2l > 100))
    {
        ocenter_c2l = 50;
    }
    if ((!ocenter_c2t) || (ocenter_c2t > 100))
    {
        ocenter_c2t = 50;
    }
    control &= 0xffff8fff; // lens shielding mux : normal
    control &= 0xffff7fff; // lens shielding mode: z
    control &= 0xff00ffff; // clear lens shielding pre_gain_shift
    switch (gain_0db)
    {
        case 0:
            control |= 0x00000000; // set lens shielding pre_gain_shift
            gain_0db = 128;
            break;
        case 1:
            control |= 0x00550000; // set lens shielding pre_gain_shift
            gain_0db = 64;
            break;
        case 2:
            control |= 0x00aa0000; // set lens shielding pre_gain_shift
            gain_0db = 32;
            break;
        case 3:
            control |= 0x00ff0000; // set lens shielding pre_gain_shift
            gain_0db = 16;
            break;
        default:
            control |= 0x00000000; // set lens shielding pre_gain_shift
            gain_0db = 128;
            break;
    }

    // variables
    hmax    = hactive - 1;
    vmax    = vactive - 1;
    hcenter = (hmax*ocenter_c2l + 50)/100;
    vcenter = (vmax*ocenter_c2t + 50)/100;
    rradium = (unsigned int)div64((unsigned long long)hmax*(unsigned long long)hmax*(unsigned long long)10000 + (unsigned long long)vmax*(unsigned long long)vmax*(unsigned long long)psize_v2h*(unsigned long long)psize_v2h + (unsigned long long)20000, (unsigned long long)40000);
    xscale  = (7935*32*2 + hmax)/(hmax + hmax);
    if (xscale > 0x00000fff)
    {
        xscale = 0x00000fff;
    }
    yscale  = (7935*32*2 + vmax)/(vmax + vmax);
    if (yscale > 0x00000fff)
    {
        yscale = 0x00000fff;
    }
#if 0
    pr_info("hmax:%u vmax:%u hcenter:%u vcenter:%u rradium:%u xscale:%u yscale:%u \n",
             hmax,vmax,hcenter,vcenter,rradium,xscale,yscale);
#endif
    for (i = 0; i < 32; i++)
    {
        haxis[i] = (i*256*32*2 + xscale)/(xscale + xscale);
        vaxis[i] = (i*256*32*2 + yscale)/(yscale + yscale);
    }
#if 0
    pr_info(" haxis----\n");
    pr_info("%u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u \n", \
         haxis[0], haxis[1], haxis[2], haxis[3], haxis[4], haxis[5], haxis[6], haxis[7], haxis[8], haxis[9], \
        haxis[10],haxis[11],haxis[12],haxis[13],haxis[14],haxis[15],haxis[16],haxis[17],haxis[18],haxis[19],\
        haxis[20],haxis[21],haxis[22],haxis[23],haxis[24],haxis[25],haxis[26],haxis[27],haxis[28],haxis[29],\
        haxis[30],haxis[31]);
    pr_info(" vaxis----\n");
    pr_info("%u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u %u \n", \
         vaxis[0], vaxis[1], vaxis[2], vaxis[3], vaxis[4], vaxis[5], vaxis[6], vaxis[7], vaxis[8], vaxis[9], \
        vaxis[10],vaxis[11],vaxis[12],vaxis[13],vaxis[14],vaxis[15],vaxis[16],vaxis[17],vaxis[18],vaxis[19],\
        vaxis[20],vaxis[21],vaxis[22],vaxis[23],vaxis[24],vaxis[25],vaxis[26],vaxis[27],vaxis[28],vaxis[29],\
        vaxis[30],vaxis[31]);
#endif
    // write lut
    WRITE_VCBUS_REG(0x2d28, control&0xefffffff); // disable lens shielding
    WRITE_VCBUS_REG(0x2d29, (xscale << 16)|
                           (yscale << 0));      // lens shielding xscale & yscale
    WRITE_VCBUS_REG(0x2d2a, 0x00000000);         // lens shielding xoffset = yoffset = 0
    WRITE_VCBUS_REG(0x2d2b, 0x80808080);         // lens shielding pre_gain = 0.5
    WRITE_VCBUS_REG(0x2d2c, 0x00000000);         // lens shielding post_offset = 0
    WRITE_VCBUS_REG(0x2daf, 0x0000000c);         // lens shielding lut ram: v-bus write mode
    WRITE_VCBUS_REG(0x2dc6, 0x00000000);         // point to head of ram
    for (i = 0; i < 32; i++)
    {
        for (j = 0; j < 32; j++)
        {
            dx = (haxis[j] > hcenter) ? (haxis[j] - hcenter) : (hcenter - haxis[j]);
            dy = (vaxis[i] > vcenter) ? (vaxis[i] - vcenter) : (vcenter - vaxis[i]);
            dy = (dy*psize_v2h + 50)/100;
            curve[i][j] = (phase_curve_grid(curvature_gr, gain_0db, dx, dy, rradium) << 24)|
                          (phase_curve_grid(curvature_r,  gain_0db, dx, dy, rradium) << 16)|
                          (phase_curve_grid(curvature_b,  gain_0db, dx, dy, rradium) <<  8)|
                          (phase_curve_grid(curvature_gb, gain_0db, dx, dy, rradium) <<  0);
            WRITE_VCBUS_REG(0x2dc7, curve[i][j]);
        }
    }
    WRITE_VCBUS_REG(0x2daf, 0x00000000); // lens shielding lut ram: hardware read mode

    // disable/enable
    if (force_enable)
    {
        //WRITE_VCBUS_REG(0x2d28, backup|0x10000000); // force to enable lens shielding
        WRITE_VCBUS_REG_BITS(0x2d28, 1, LNS_CMOP_ENABLE_BIT, LNS_CMOP_ENABLE_WID);
    }
    else
    {
        //WRITE_VCBUS_REG(0x2d28, backup); // retrieve original disable/enable status
        WRITE_VCBUS_REG_BITS(0x2d28, 0, LNS_CMOP_ENABLE_BIT, LNS_CMOP_ENABLE_WID);
    }
    pr_info(" Gb----\n");
    for (i = 0; i < 32; i++) {
        pr_info("%3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %u %3u %3u \n", \
         curve[i][0]&0xff, curve[i][1]&0xff, curve[i][2]&0xff, curve[i][3]&0xff, curve[i][4]&0xff, curve[i][5]&0xff, curve[i][6]&0xff, curve[i][7]&0xff, curve[i][8]&0xff, curve[i][9]&0xff, \
        curve[i][10]&0xff,curve[i][11]&0xff,curve[i][12]&0xff,curve[i][13]&0xff,curve[i][14]&0xff,curve[i][15]&0xff,curve[i][16]&0xff,curve[i][17]&0xff,curve[i][18]&0xff,curve[i][19]&0xff,\
        curve[i][20]&0xff,curve[i][21]&0xff,curve[i][22]&0xff,curve[i][23]&0xff,curve[i][24]&0xff,curve[i][25]&0xff,curve[i][26]&0xff,curve[i][27]&0xff,curve[i][28]&0xff,curve[i][29]&0xff,\
        curve[i][30]&0xff,curve[i][31]&0xff);
    }
    pr_info(" B----\n");
    for (i = 0; i < 32; i++) {
        pr_info("%3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %u %3u %3u \n", \
        ( curve[i][0]>>8)&0xff,( curve[i][1]>>8)&0xff,( curve[i][2]>>8)&0xff,( curve[i][3]>>8)&0xff,( curve[i][4]>>8)&0xff,( curve[i][5]>>8)&0xff,( curve[i][6]>>8)&0xff,( curve[i][7]>>8)&0xff,( curve[i][8]>>8)&0xff,( curve[i][9]>>8)&0xff, \
        (curve[i][10]>>8)&0xff,(curve[i][11]>>8)&0xff,(curve[i][12]>>8)&0xff,(curve[i][13]>>8)&0xff,(curve[i][14]>>8)&0xff,(curve[i][15]>>8)&0xff,(curve[i][16]>>8)&0xff,(curve[i][17]>>8)&0xff,(curve[i][18]>>8)&0xff,(curve[i][19]>>8)&0xff,\
        (curve[i][20]>>8)&0xff,(curve[i][21]>>8)&0xff,(curve[i][22]>>8)&0xff,(curve[i][23]>>8)&0xff,(curve[i][24]>>8)&0xff,(curve[i][25]>>8)&0xff,(curve[i][26]>>8)&0xff,(curve[i][27]>>8)&0xff,(curve[i][28]>>8)&0xff,(curve[i][29]>>8)&0xff,\
        (curve[i][30]>>8)&0xff,(curve[i][31]>>8)&0xff);
    }
    pr_info(" R----\n");
    for (i = 0; i < 32; i++) {
        pr_info("%3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %u %3u %3u \n", \
        ( curve[i][0]>>16)&0xff,( curve[i][1]>>16)&0xff,( curve[i][2]>>16)&0xff,( curve[i][3]>>16)&0xff,( curve[i][4]>>16)&0xff,( curve[i][5]>>16)&0xff,( curve[i][6]>>16)&0xff,( curve[i][7]>>16)&0xff,( curve[i][8]>>16)&0xff,( curve[i][9]>>16)&0xff, \
        (curve[i][10]>>16)&0xff,(curve[i][11]>>16)&0xff,(curve[i][12]>>16)&0xff,(curve[i][13]>>16)&0xff,(curve[i][14]>>16)&0xff,(curve[i][15]>>16)&0xff,(curve[i][16]>>16)&0xff,(curve[i][17]>>16)&0xff,(curve[i][18]>>16)&0xff,(curve[i][19]>>16)&0xff,\
        (curve[i][20]>>16)&0xff,(curve[i][21]>>16)&0xff,(curve[i][22]>>16)&0xff,(curve[i][23]>>16)&0xff,(curve[i][24]>>16)&0xff,(curve[i][25]>>16)&0xff,(curve[i][26]>>16)&0xff,(curve[i][27]>>16)&0xff,(curve[i][28]>>16)&0xff,(curve[i][29]>>16)&0xff,\
        (curve[i][30]>>16)&0xff,(curve[i][31]>>16)&0xff);
    }
    pr_info(" Gr----\n");
    for (i = 0; i < 32; i++) {
        pr_info("%3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %3u %u %3u %3u \n", \
        ( curve[i][0]>>24)&0xff,( curve[i][1]>>24)&0xff,( curve[i][2]>>24)&0xff,( curve[i][3]>>24)&0xff,( curve[i][4]>>24)&0xff,( curve[i][5]>>24)&0xff,( curve[i][6]>>24)&0xff,( curve[i][7]>>24)&0xff,( curve[i][8]>>24)&0xff,( curve[i][9]>>24)&0xff, \
        (curve[i][10]>>24)&0xff,(curve[i][11]>>24)&0xff,(curve[i][12]>>24)&0xff,(curve[i][13]>>24)&0xff,(curve[i][14]>>24)&0xff,(curve[i][15]>>24)&0xff,(curve[i][16]>>24)&0xff,(curve[i][17]>>24)&0xff,(curve[i][18]>>24)&0xff,(curve[i][19]>>24)&0xff,\
        (curve[i][20]>>24)&0xff,(curve[i][21]>>24)&0xff,(curve[i][22]>>24)&0xff,(curve[i][23]>>24)&0xff,(curve[i][24]>>24)&0xff,(curve[i][25]>>24)&0xff,(curve[i][26]>>24)&0xff,(curve[i][27]>>24)&0xff,(curve[i][28]>>24)&0xff,(curve[i][29]>>24)&0xff,\
        (curve[i][30]>>24)&0xff,(curve[i][31]>>24)&0xff);
    }
    pr_info(" -------end------\n");

}
#endif
